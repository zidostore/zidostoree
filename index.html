<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>متجر ZiDo - تجربة تسوق خيالية</title>
  <meta name="description" content="متجر ZiDo - تجربة تسوق رقمية خيالية مع واقع معزز، ذكاء اصطناعي، وألعاب تفاعلية" />
  <meta name="keywords" content="شحن فورتنايت, فيبوكس, متابعين تيك توك, يوزرات تيك توك, خدمات انستغرام, رقم واتساب, متجر رقمي, ZiDo, واقع معزز" />
  <meta property="og:title" content="متجر ZiDo - تجربة تسوق خيالية" />
  <meta property="og:description" content="استمتع بتجربة تسوق فريدة مع واقع معزز، مساعد ذكي، وألعاب تفاعلية!" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://zido.example.com" />
  <meta property="og:image" content="logo.jpg" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    :root {
      --bg: #0a0c10;
      --panel: rgba(22, 26, 37, 0.85);
      --panel-2: rgba(29, 35, 51, 0.9);
      --text: #f6f7fb;
      --muted: #a0abc0;
      --brand: #00cfff;
      --brand-gradient: linear-gradient(135deg, #00cfff, #0099ff);
      --brand-600: #00afd6;
      --accent: #25d366;
      --danger: #ff5964;
      --warning: #ff9800;
      --success: #22c55e;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
      --radius: 18px;
      --transition: all 0.3s ease;
      --glass: rgba(255, 255, 255, 0.1);
      --glass-border: rgba(255, 255, 255, 0.15);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      height: 100%;
      scroll-behavior: smooth;
      overflow-x: hidden;
      -webkit-text-size-adjust: 100%;
    }
    body {
      font-family: "Tajawal", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(135deg, #0a0c10, #141925);
      color: var(--text);
      position: relative;
      line-height: 1.6;
    }
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
    a { color: inherit; text-decoration: none; }
    canvas.bg {
      position: fixed;
      inset: 0;
      width: 100vw;
      height: 100vh;
      z-index: -1;
    }
    .parallax-layer {
      position: fixed;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -1;
      pointer-events: none;
      transform: translateZ(0);
      will-change: transform;
    }
    .layer-1 {
      background: radial-gradient(circle at 20% 50%, rgba(0, 207, 255, 0.15) 0%, transparent 50%);
      transform: translateY(0);
    }
    .layer-2 {
      background: radial-gradient(circle at 80% 20%, rgba(37, 211, 102, 0.1) 0%, transparent 50%);
      transform: translateY(0);
    }
    
    /* نافذة الصور المنبثقة */
    .image-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 5000;
      justify-content: center;
      align-items: center;
      animation: fadeIn 0.3s ease;
    }
    
    .image-modal.active {
      display: flex;
    }
    
    .modal-content {
      max-width: 90%;
      max-height: 90%;
      position: relative;
      animation: zoomIn 0.3s ease;
    }
    
    .modal-content img {
      width: 100%;
      height: auto;
      border-radius: 10px;
      box-shadow: 0 0 50px rgba(0, 207, 255, 0.3);
      border: 2px solid var(--brand);
    }
    
    .close-modal {
      position: absolute;
      top: -15px;
      right: -15px;
      background: rgba(255, 107, 107, 0.95);
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      cursor: pointer;
      z-index: 10;
      border: 2px solid white;
      transition: var(--transition);
      font-weight: bold;
    }
    
    .close-modal:hover {
      background: #ff4757;
      transform: scale(1.1);
    }
    
    @keyframes zoomIn {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }
    
    /* منتج نفذ من المخزون */
    .item.out-of-stock {
      opacity: 0.6;
      position: relative;
      filter: grayscale(0.5);
    }
    
    .item.out-of-stock::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.6);
      border-radius: var(--radius);
      z-index: 1;
    }
    
    .out-of-stock-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(135deg, #ff6b6b, #ff4757);
      color: white;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
      z-index: 2;
      animation: pulse 2s infinite;
    }
    
    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      background: #666 !important;
    }
    
    .btn:disabled:hover {
      transform: none !important;
      box-shadow: none !important;
    }
    
    header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(22, 26, 37, 0.85);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      padding: 12px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: var(--shadow);
      border-bottom: 1px solid var(--glass-border);
    }
    header .brand { display: flex; gap: 14px; align-items: center; }
    header img {
      height: 46px; width: 46px; object-fit: cover; border-radius: 14px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      border: 2px solid var(--glass-border);
    }
    header h1 {
      margin: 0; font-size: 24px; font-weight: 800; letter-spacing: 0.5px;
      background: var(--brand-gradient);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .top-actions { display: flex; gap: 16px; align-items: center; }
    .menu-btn {
      cursor: pointer; font-size: 20px; color: #fff; padding: 8px 12px; border-radius: 12px;
      background: var(--glass); transition: var(--transition); display: flex; align-items: center; gap: 8px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .menu-btn:hover { background: rgba(255, 255, 255, 0.2); }
    .cart-icon {
      position: relative; font-size: 22px; color: #fff; cursor: pointer; user-select: none;
      padding: 8px; border-radius: 12px; background: var(--glass); transition: var(--transition);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .cart-icon:hover { background: rgba(255, 255, 255, 0.2); }
    .cart-count {
      position: absolute; top: -6px; left: -8px; background: #e11d48; color: #fff;
      font-size: 12px; font-weight: bold; padding: 2px 6px; border-radius: 999px; min-width: 20px; text-align: center;
      box-shadow: 0 2px 8px rgba(225, 29, 72, 0.4);
    }
    .whatsapp-header-btn {
      background: var(--accent);
      color: white;
      padding: 8px 16px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: bold;
      transition: var(--transition);
    }
    .whatsapp-header-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 15px rgba(37, 211, 102, 0.4);
    }
    .news-ticker {
      background: rgba(0, 207, 255, 0.2);
      border: 1px solid var(--glass-border);
      padding: 8px 12px;
      overflow: hidden;
      white-space: nowrap;
      margin: 10px 0;
      border-radius: 8px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: var(--shadow);
    }
    .news-ticker__content {
      display: inline-block;
      animation: scroll 30s linear infinite;
      font-size: 14px;
      color: var(--brand);
      font-weight: 600;
    }
    @keyframes scroll {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }
    .news-ticker i {
      margin: 0 8px;
      color: #ffd89f;
    }
    .countdown {
      background: rgba(255, 107, 107, 0.2);
      padding: 8px 12px;
      border-radius: 8px;
      text-align: center;
      margin: 10px 0;
      font-weight: bold;
      color: var(--danger);
      display: inline-block;
    }
    .wishlist-btn {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: #fff;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 2;
      transition: var(--transition);
    }
    .wishlist-btn:hover {
      background: rgba(255, 107, 107, 0.4);
      color: var(--danger);
    }
    .wishlist-btn.active {
      background: rgba(255, 107, 107, 0.6);
      color: var(--danger);
    }
    .recently-viewed {
      margin: 20px 0;
      padding: 16px;
      background: var(--panel);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
    }
    .recently-viewed h3 {
      color: var(--brand);
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--glass-border);
    }
    .related-products {
      margin: 20px 0;
      padding: 16px;
      background: var(--panel);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
    }
    .related-products h3 {
      color: var(--brand);
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--glass-border);
    }
    .subscribe-form {
      display: flex;
      gap: 10px;
      margin: 20px auto;
      max-width: 400px;
      background: var(--panel);
      padding: 16px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
    }
    .subscribe-form input {
      flex: 1;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid var(--glass-border);
      background: rgba(0, 0, 0, 0.2);
      color: #fff;
      text-align: center;
    }
    .subscribe-form button {
      padding: 12px 16px;
      background: var(--brand-gradient);
      color: #001317;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
    }
    .password-form {
      margin: 20px 0;
      display: flex;
      gap: 10px;
      justify-content: center;
      align-items: center;
    }
    .password-form input {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid var(--glass-border);
      background: rgba(0, 0, 0, 0.2);
      color: #fff;
      text-align: center;
      width: 200px;
    }
    .password-form button {
      padding: 10px 16px;
      background: var(--brand-gradient);
      color: #001317;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: bold;
    }
    #subscribers-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
    }
    #subscribers-table th,
    #subscribers-table td {
      padding: 12px;
      text-align: center;
      border-bottom: 1px solid var(--glass-border);
    }
    #subscribers-table th {
      background: var(--brand-gradient);
      color: #001317;
    }
    #subscribers-table tr:nth-child(even) {
      background: rgba(0, 0, 0, 0.1);
    }
    .search-container {
      position: relative;
      display: none;
      margin: 15px 20px;
    }
    .search-box {
      width: 100%;
      padding: 12px 45px 12px 16px;
      border-radius: 12px;
      border: 1px solid var(--glass-border);
      background: rgba(0, 0, 0, 0.3);
      color: var(--text);
      font-family: inherit;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .search-box:focus {
      outline: none;
      border-color: var(--brand);
      box-shadow: 0 0 0 2px rgba(0, 207, 255, 0.2);
    }
    .search-icon {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
    }
    .search-container.active {
      display: block;
      animation: searchSlide 0.3s ease;
    }
    @keyframes searchSlide {
      from { transform: translateY(-20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .side-menu {
      height: 100%; width: 0; position: fixed; z-index: 2000; top: 0; right: 0;
      background: rgba(29, 35, 51, 0.95);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      overflow-x: hidden; transition: width 0.4s ease; padding-top: 70px; box-shadow: var(--shadow);
      border-left: 1px solid var(--glass-border);
    }
    .side-menu.open { width: 300px; }
    .side-menu h3 {
      color: #fff; margin: 0 20px 16px; font-weight: 800; font-size: 20px; padding-bottom: 10px;
      border-bottom: 1px solid var(--glass-border);
    }
    .side-menu a {
      padding: 14px 22px; font-size: 17px; color: var(--muted); display: flex; align-items: center; gap: 12px;
      transition: var(--transition); border-radius: 12px; margin: 6px 12px;
    }
    .side-menu a:hover { color: #fff; background: rgba(0, 207, 255, 0.15); transform: translateX(-5px); }
    .side-menu .closebtn {
      position: absolute; top: 18px; left: 18px; font-size: 32px; color: #fff; text-decoration: none; padding: 6px;
      border-radius: 50%; background: var(--glass); width: 40px; height: 40px; display: flex; align-items: center; justify-content: center;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .search-menu-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 10px 20px;
      padding: 10px;
      background: var(--glass);
      border-radius: 12px;
      color: var(--muted);
      cursor: pointer;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .search-menu-btn:hover {
      background: rgba(0, 207, 255, 0.15);
      color: #fff;
    }
    main {
      display: grid; gap: 32px; padding: 26px 18px 50px; max-width: 1300px; margin: 0 auto;
    }
    section { display: none; padding: 0; animation: fadeIn 0.5s ease; }
    section.active { display: block; }
    @keyframes sectionFade {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    section h2 {
      text-align: center; margin: 20px 0 28px; color: var(--brand); font-size: 32px; font-weight: 800; position: relative; padding-bottom: 12px;
    }
    section h2::after {
      content: ""; position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
      width: 80px; height: 4px; background: var(--brand-gradient); border-radius: 2px;
    }
    .hero {
      position: relative; display: grid; place-items: center; border-radius: var(--radius); overflow: hidden;
      min-height: 300px;
      background: linear-gradient(135deg, #0b0e14, #0f1218);
      box-shadow: var(--shadow); margin-bottom: 10px;
    }
    .hero::after {
      content: "";
      position: absolute; inset: 0;
      background: linear-gradient(135deg, rgba(0,0,0,0.4), rgba(0,0,0,0.7));
    }
    .hero .hero-content {
      position: relative; z-index: 1; text-align: center; padding: 30px 20px;
    }
    .welcome-image {
      max-width: 100%;
      height: auto;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 20px;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .welcome-image:hover {
      transform: scale(1.02);
      box-shadow: 0 0 30px rgba(0, 207, 255, 0.3);
    }
    
    .intro-text {
      text-align: center; margin: 20px auto 10px; padding: 20px; background: var(--panel);
      border-radius: var(--radius); box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
    }
    .intro-text h1 {
      font-size: 36px; margin: 10px 0; color: #fff; background: var(--brand-gradient);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    }
    .intro-text p { font-size: 18px; color: var(--muted); margin: 0; }
    .animate-text {
      background: var(--brand-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-size: 200% auto;
      animation: textShine 3s linear infinite;
    }
    @keyframes textShine {
      to { background-position: 200% center; }
    }
    .store {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 22px;
    }
    .item {
      border: 1px solid var(--glass-border); border-radius: var(--radius); padding: 18px; text-align: center;
      background: var(--panel); box-shadow: var(--shadow); position: relative; transition: var(--transition); overflow: hidden;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      cursor: pointer;
    }
    .item::before {
      content: ""; position: absolute; top: 0; left: 0; right: 0; height: 5px; background: var(--brand-gradient);
      opacity: 0; transition: var(--transition);
    }
    .item:hover { transform: translateY(-8px); border-color: rgba(0, 207, 255, 0.3); }
    .item:hover::before { opacity: 1; }
    .item img {
      width: 140px; height: 140px; object-fit: contain; margin: 12px auto 10px; display: block; border-radius: 16px;
      transition: var(--transition); box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
      background: rgba(255, 255, 255, 0.05);
      padding: 10px;
      cursor: pointer;
    }
    
    .item img:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(0, 207, 255, 0.3);
    }
    
    .item h3 { margin: 12px 0 6px; font-size: 20px; font-weight: 700; color: #fff; }
    .price { color: var(--brand); font-weight: 800; margin: 8px 0 14px; font-size: 18px; }
    .item select {
      width: 100%; padding: 12px 14px; border-radius: 12px; border: 1px solid var(--glass-border);
      background: rgba(0, 0, 0, 0.2); color: #d7dee9; margin-bottom: 12px; transition: var(--transition); cursor: pointer;
      z-index: 2;
      position: relative;
    }
    .item select:focus { outline: none; border-color: var(--brand); box-shadow: 0 0 0 2px rgba(0, 207, 255, 0.2); }
    .btn {
      padding: 12px 16px; border: none; background: var(--brand-gradient); color: #001317; border-radius: 12px; cursor: pointer; font-weight: 800;
      width: 100%; transition: var(--transition); position: relative; overflow: hidden;
      z-index: 2;
      position: relative;
    }
    .btn::before {
      content: ""; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent); transition: 0.5s;
    }
    .btn:hover:not(:disabled) { 
      box-shadow: 0 6px 20px rgba(0, 207, 255, 0.5); 
      transform: translateY(-3px); 
    }
    
    .btn:hover:not(:disabled)::before { left: 100%; }
    .btn:active { transform: translateY(1px); }
    .item-hover-content {
      position: absolute;
      bottom: -50px;
      left: 0;
      right: 0;
      background: rgba(22, 26, 37, 0.95);
      padding: 15px;
      transition: all 0.3s ease;
      opacity: 0;
    }
    .item:hover .item-hover-content {
      bottom: 0;
      opacity: 1;
    }
    .rating {
      display: flex;
      gap: 3px;
      margin: 8px 0;
      justify-content: center;
    }
    .rating i {
      color: #ffc107;
      font-size: 14px;
    }
    .discount-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: linear-gradient(135deg, #ff5964, #d73640);
      color: white;
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
      z-index: 2;
      animation: pulse 2s infinite;
    }
    .item-added-effect {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--brand-gradient);
      color: #001317;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      opacity: 0;
      z-index: 10;
      pointer-events: none;
    }
    @keyframes itemAdded {
      0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
      50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
    }
    .testimonials { position: relative; overflow: hidden; max-width: 100%; margin: 30px auto; padding: 10px 0; }
    .slider { display: flex; transition: transform 0.5s ease; will-change: transform; }
    .testimonial-box {
      flex: 0 0 33.33%; max-width: 33.33%;
      background: var(--panel); border-radius: var(--radius); padding: 24px; margin: 12px; text-align: center; box-shadow: var(--shadow);
      border: 1px solid var(--glass-border); transition: var(--transition);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .testimonial-box:hover { transform: translateY(-5px); box-shadow: 0 12px 30px rgba(0, 0, 0, 0.4); }
    .testimonial-box img {
      width: 80px; height: 80px; border-radius: 50%; margin-bottom: 16px; border: 3px solid var(--brand); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      object-fit: cover;
    }
    .testimonial-box h3 { margin: 8px 0; color: #fff; }
    .testimonial-box p { color: var(--muted); margin: 6px 0; }
    .slider-btn {
      position: absolute; top: 50%; transform: translateY(-50%); background: var(--brand-gradient);
      border: none; color: #001317; font-size: 20px; cursor: pointer; padding: 12px 16px; border-radius: 50%;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); transition: var(--transition); z-index: 10;
    }
    .slider-btn:hover { box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4); transform: translateY(-50%) scale(1.1); }
    .prev { left: 10px; } .next { right: 10px; }
    .cart-overlay {
      position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(5px);
      display: none; align-items: flex-start; justify-content: flex-end; z-index: 3000; opacity: 0; transition: opacity 0.3s ease;
    }
    .cart-overlay.active { display: flex; opacity: 1; }
    .cart-popup {
      width: 100%; max-width: 420px; background: var(--panel-2); height: 100vh; box-shadow: var(--shadow);
      display: flex; flex-direction: column; transform: translateX(100%); transition: transform 0.4s ease;
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border-left: 1px solid var(--glass-border);
    }
    .cart-overlay.active .cart-popup { transform: translateX(0); }
    .cart-header {
      display: flex; align-items: center; justify-content: space-between; padding: 18px 20px;
      background: rgba(0, 0, 0, 0.2); border-bottom: 1px solid var(--glass-border);
    }
    .cart-header h3 { margin: 0; font-size: 20px; font-weight: 800; color: #fff; }
    .close-cart {
      cursor: pointer; font-size: 26px; color: #fff; background: none; border: none; padding: 6px; border-radius: 50%; width: 36px; height: 36px;
      display: flex; align-items: center; justify-content: center; transition: var(--transition);
    }
    .close-cart:hover { background: var(--glass); }
    .cart-list { padding: 16px 18px; overflow-y: auto; flex: 1; -webkit-overflow-scrolling: touch; }
    .cart-item {
      display: flex; align-items: center; gap: 14px; background: rgba(0, 0, 0, 0.2); border: 1px solid var(--glass-border);
      border-radius: 14px; padding: 14px; margin-bottom: 14px; transition: var(--transition);
    }
    .cart-item:hover { border-color: rgba(0, 207, 255, 0.3); }
    .cart-item img {
      width: 54px; height: 54px; border-radius: 12px; object-fit: contain; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      background: rgba(255, 255, 255, 0.05);
      padding: 5px;
    }
    
    .cart-item .meta { flex: 1; }
    .cart-item .meta .name { font-weight: 700; color: #fff; }
    .cart-item .meta .price { color: var(--brand); font-weight: 700; }
    .cart-item .quantity-controls {
      display: flex; align-items: center; gap: 8px; margin-top: 5px;
    }
    .cart-item .quantity-controls button {
      background: var(--glass); border: none; color: #fff; width: 24px; height: 24px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center; cursor: pointer; transition: var(--transition);
    }
    .cart-item .quantity-controls button:hover {
      background: var(--brand);
    }
    .cart-item .quantity-controls span {
      padding: 0 8px;
    }
    .cart-item button.remove-btn {
      background: none; border: none; color: #ff6b6b; cursor: pointer; font-size: 18px; padding: 6px; border-radius: 6px; transition: var(--transition);
    }
    .cart-item button.remove-btn:hover { background: rgba(255, 107, 107, 0.1); }
    .cart-item-added {
      animation: cartItemHighlight 1s ease;
    }
    @keyframes cartItemHighlight {
      0% { background-color: rgba(0, 207, 255, 0.1); }
      100% { background-color: transparent; }
    }
    .cart-footer {
      border-top: 1px solid var(--glass-border); padding: 18px 20px; background: rgba(0, 0, 0, 0.2);
    }
    .cart-footer .total {
      display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; font-size: 18px; padding: 10px 0;
      border-top: 1px solid var(--glass-border); border-bottom: 1px solid var(--glass-border);
    }
    .payment-btn {
      width: 100%; padding: 14px 16px; border: none; border-radius: 12px; font-weight: 800; cursor: pointer; margin-top: 10px; transition: var(--transition);
      display: flex; align-items: center; justify-content: center; gap: 8px;
    }
    .payment-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3); }
    .whatsapp-btn { background: var(--accent); color: #001a0b; }
    .stc-btn { background: linear-gradient(135deg, #6f2cff, #4c17cc); color: #fff; }
    .visa-btn { background: linear-gradient(135deg, #1434cb, #0c2185); color: #fff; }
    .mada-btn { background: linear-gradient(135deg, #1ca37a, #0e7255); color: #00130c; }
    .note {
      margin-top: 14px; color: #ffd89f; font-size: 14px; text-align: center; padding: 10px;
      background: rgba(255, 216, 159, 0.1); border-radius: 8px;
    }
    .empty-cart { text-align: center; padding: 40px 20px; color: var(--muted); }
    .empty-cart i { font-size: 48px; margin-bottom: 16px; opacity: 0.5; }
    .whatsapp-float {
      position: fixed; bottom: 22px; right: 22px; background: var(--accent); color: #fff; font-size: 24px;
      width: 60px; height: 60px; border-radius: 999px; display: grid; place-items: center;
      box-shadow: 0 8px 28px rgba(37, 211, 102, 0.4); z-index: 2600; transition: var(--transition); animation: pulse 2s infinite;
    }
    .whatsapp-float:hover { transform: scale(1.1); box-shadow: 0 10px 32px rgba(37, 211, 102, 0.5); }
    .loader {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 9999;
      justify-content: center;
      align-items: center;
    }
    .loader-content {
      text-align: center;
      color: white;
    }
    .spinner {
      border: 5px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top: 5px solid var(--brand);
      width: 50px;
      height: 50px;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .filters {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin: 20px 0;
      justify-content: center;
    }
    .filter-btn {
      padding: 10px 18px;
      background: var(--glass);
      border: 1px solid var(--glass-border);
      border-radius: 12px;
      color: var(--muted);
      cursor: pointer;
      transition: var(--transition);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .filter-btn:hover, .filter-btn.active {
      background: var(--brand-gradient);
      color: #001317;
      border-color: var(--brand);
    }
    .confirmation {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 4000;
      justify-content: center;
      align-items: center;
    }
    .confirmation-content {
      background: var(--panel);
      border-radius: var(--radius);
      padding: 30px;
      max-width: 500px;
      width: 90%;
      text-align: center;
      box-shadow: var(--shadow);
      animation: fadeIn 0.5s ease;
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border: 1px solid var(--glass-border);
    }
    .confirmation-content h3 {
      color: var(--brand);
      margin-bottom: 20px;
    }
    .confirmation-buttons {
      display: flex;
      gap: 12px;
      justify-content: center;
      margin-top: 20px;
    }
    .about-section {
      background: var(--panel);
      border-radius: var(--radius);
      padding: 24px;
      margin: 20px 0;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
    }
    .about-section h3 {
      color: var(--brand);
      margin-bottom: 16px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--glass-border);
    }
    .faq-item {
      margin-bottom: 16px;
      border-bottom: 1px solid var(--glass-border);
      padding-bottom: 16px;
    }
    .faq-question {
      font-weight: 700;
      color: #fff;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .faq-answer {
      color: var(--muted);
      margin-top: 10px;
      display: none;
    }
    .faq-item.active .faq-answer {
      display: block;
    }
    .notification {
      position: fixed;
      bottom: 20px;
      left: 20px;
      padding: 15px 20px;
      background: var(--panel);
      color: white;
      border-radius: 10px;
      box-shadow: var(--shadow);
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 10px;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
    }
    .notification.show {
      transform: translateX(0);
    }
    .notification.success {
      border-left: 4px solid var(--success);
    }
    .notification.error {
      border-left: 4px solid var(--danger);
    }
    .featured-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: var(--brand-gradient);
      color: #001317;
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: bold;
      z-index: 1;
    }
    .trust-badges {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    .trust-badge {
      background: rgba(0, 0, 0, 0.2);
      padding: 8px 16px;
      border-radius: 12px;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 6px;
      border: 1px solid var(--glass-border);
    }
    .return-policy {
      background: rgba(34, 197, 94, 0.1);
      padding: 12px;
      border-radius: 12px;
      text-align: center;
      margin: 20px 0;
      border: 1px solid rgba(34, 197, 94, 0.3);
    }
    .countdown-timer {
      font-weight: bold;
      color: var(--danger);
      font-size: 16px;
      margin: 10px 0;
    }
    .search-suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--panel);
      border-radius: 0 0 12px 12px;
      border: 1px solid var(--glass-border);
      border-top: none;
      z-index: 10;
      max-height: 200px;
      overflow-y: auto;
      display: none;
    }
    .search-suggestion {
      padding: 10px 16px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .search-suggestion:hover {
      background: rgba(0, 207, 255, 0.1);
    }
    /* تأثيرات خيالية جديدة */
    .item::after {
      content: "";
      position: absolute;
      bottom: -10px;
      left: 5%;
      width: 90%;
      height: 20px;
      background: linear-gradient(to bottom, rgba(255,255,255,0.3), transparent);
      border-radius: 50%;
      filter: blur(5px);
      opacity: 0.5;
      transition: var(--transition);
    }
    .item:hover::after {
      opacity: 0.8;
      transform: scale(1.05);
    }
    @keyframes glowPulse {
      0%, 100% { box-shadow: 0 0 20px rgba(0,207,255,0.5); }
      50% { box-shadow: 0 0 40px rgba(0,207,255,0.8), 0 0 60px rgba(37,211,102,0.4); }
    }
    .featured-item {
      animation: glowPulse 3s ease-in-out infinite;
    }
    .smart-assistant {
      position: fixed;
      bottom: 100px;
      left: 20px;
      width: 60px;
      height: 60px;
      background: var(--brand-gradient);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 1000;
      box-shadow: 0 4px 15px rgba(0, 207, 255, 0.4);
      transition: var(--transition);
    }
    .smart-assistant:hover {
      transform: scale(1.1);
    }
    .assistant-chat {
      position: fixed;
      bottom: 170px;
      left: 20px;
      width: 300px;
      background: var(--panel);
      border-radius: 15px;
      box-shadow: var(--shadow);
      z-index: 1000;
      display: none;
      flex-direction: column;
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border: 1px solid var(--glass-border);
    }
    .assistant-header {
      padding: 15px;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 15px 15px 0 0;
      display: flex;
      align-items: center;
      gap: 10px;
      border-bottom: 1px solid var(--glass-border);
    }
    .assistant-messages {
      padding: 15px;
      max-height: 300px;
      overflow-y: auto;
      flex: 1;
    }
    .message {
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 10px;
      max-width: 80%;
    }
    .message.user {
      background: rgba(0, 207, 255, 0.2);
      margin-left: auto;
      text-align: left;
    }
    .message.assistant {
      background: rgba(255, 255, 255, 0.1);
      margin-right: auto;
    }
    .assistant-input {
      padding: 15px;
      border-top: 1px solid var(--glass-border);
      display: flex;
      gap: 10px;
    }
    .assistant-input input {
      flex: 1;
      padding: 10px;
      border-radius: 20px;
      border: 1px solid var(--glass-border);
      background: rgba(0, 0, 0, 0.2);
      color: white;
    }
    .assistant-input button {
      padding: 10px 15px;
      background: var(--brand);
      border: none;
      border-radius: 20px;
      color: white;
      cursor: pointer;
    }
    /* زر Tawk.to العائم */
    .tawkto-float {
      position: fixed;
      bottom: 160px;
      right: 22px;
      background: var(--brand-gradient);
      color: white;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 2500;
      box-shadow: 0 8px 28px rgba(0, 207, 255, 0.4);
      transition: var(--transition);
      animation: pulse 2s infinite;
    }
    .tawkto-float:hover {
      transform: scale(1.1);
      box-shadow: 0 10px 32px rgba(0, 207, 255, 0.5);
    }
    /* وصف المنتج */
    .product-description {
      color: var(--muted);
      font-size: 14px;
      margin: 8px 0;
      line-height: 1.4;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }
    .item.expanded .product-description {
      max-height: 100px;
    }
    .read-more {
      background: none;
      border: none;
      color: var(--brand);
      cursor: pointer;
      font-size: 12px;
      margin-top: 5px;
    }
    /* صفحة المنتج المفصل */
    .product-detail {
      display: none;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .product-detail.active {
      display: block;
    }
    .product-header {
      display: flex;
      gap: 30px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }
    .product-image {
      flex: 1;
      min-width: 300px;
      text-align: center;
    }
    .product-image img {
      width: 100%;
      max-width: 400px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      cursor: pointer;
    }
    .product-info {
      flex: 1;
      min-width: 300px;
    }
    .back-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      background: var(--glass);
      border: 1px solid var(--glass-border);
      border-radius: 12px;
      color: var(--text);
      cursor: pointer;
      margin-bottom: 20px;
      transition: var(--transition);
    }
    .back-btn:hover {
      background: rgba(0, 207, 255, 0.2);
    }
    .product-actions {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    .product-actions .btn {
      flex: 1;
      min-width: 200px;
    }
    .product-description-full {
      color: var(--muted);
      line-height: 1.6;
      margin: 20px 0;
      white-space: pre-line;
    }
    .product-options {
      margin: 20px 0;
    }
    .product-options select {
      width: 100%;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid var(--glass-border);
      background: rgba(0, 0, 0, 0.2);
      color: white;
      margin-bottom: 15px;
    }
    /* فوتر */
    .footer {
      background: var(--panel);
      padding: 40px 20px;
      margin-top: 50px;
      border-top: 1px solid var(--glass-border);
    }
    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 30px;
    }
    .footer-section h3 {
      color: var(--brand);
      margin-bottom: 20px;
      font-size: 20px;
    }
    .footer-section p {
      color: var(--muted);
      line-height: 1.6;
    }
    .footer-links {
      list-style: none;
    }
    .footer-links li {
      margin-bottom: 10px;
    }
    .footer-links a {
      color: var(--muted);
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .footer-links a:hover {
      color: var(--brand);
      transform: translateX(-5px);
    }
    .social-links {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }
    .social-links a {
      width: 40px;
      height: 40px;
      background: var(--glass);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }
    .social-links a:hover {
      background: var(--brand);
      transform: translateY(-3px);
    }
    .footer-bottom {
      text-align: center;
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid var(--glass-border);
      color: var(--muted);
    }
    /* كوكيز */
    .cookie-consent {
      position: fixed;
      bottom: 20px;
      left: 20px;
      right: 20px;
      background: var(--panel);
      padding: 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      z-index: 10000;
      display: none;
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border: 1px solid var(--glass-border);
    }
    .cookie-consent.show {
      display: flex;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
    }
    .cookie-text {
      flex: 1;
      color: var(--text);
    }
    .cookie-buttons {
      display: flex;
      gap: 10px;
    }
    /* جميع الخدمات */
    .all-services-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 30px 0;
    }
    .service-category {
      background: var(--panel);
      border-radius: var(--radius);
      padding: 25px;
      text-align: center;
      transition: var(--transition);
      border: 1px solid var(--glass-border);
      cursor: pointer;
    }
    .service-category:hover {
      transform: translateY(-5px);
      border-color: var(--brand);
    }
    .service-category i {
      font-size: 40px;
      margin-bottom: 15px;
      color: var(--brand);
    }
    .service-category h3 {
      color: var(--text);
      margin-bottom: 10px;
    }
    .service-category p {
      color: var(--muted);
      font-size: 14px;
    }
    /* قسم الخدمات الأخرى - قريباً */
    .coming-soon-section {
      text-align: center;
      padding: 60px 20px;
      background: var(--panel);
      border-radius: var(--radius);
      margin: 30px 0;
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
    }
    
    .coming-soon-icon {
      font-size: 80px;
      color: var(--brand);
      margin-bottom: 20px;
      animation: pulse 2s infinite;
    }
    
    .coming-soon-text {
      font-size: 24px;
      color: var(--text);
      margin-bottom: 15px;
    }
    
    .coming-soon-description {
      color: var(--muted);
      font-size: 16px;
      max-width: 600px;
      margin: 0 auto 30px;
      line-height: 1.6;
    }
    
    .services-countdown {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 30px 0;
      flex-wrap: wrap;
    }
    
    .countdown-item {
      background: var(--brand-gradient);
      color: #001317;
      padding: 15px;
      border-radius: 12px;
      min-width: 80px;
      text-align: center;
      box-shadow: var(--shadow);
    }
    
    .countdown-value {
      font-size: 28px;
      font-weight: 800;
      display: block;
    }
    
    .countdown-label {
      font-size: 14px;
      font-weight: 600;
    }
    
    .upcoming-services {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 40px;
    }
    
    .upcoming-service {
      background: rgba(0, 0, 0, 0.2);
      border: 1px solid var(--glass-border);
      border-radius: var(--radius);
      padding: 20px;
      text-align: center;
      transition: var(--transition);
    }
    
    .upcoming-service:hover {
      transform: translateY(-5px);
      border-color: var(--brand);
    }
    
    .upcoming-service i {
      font-size: 40px;
      color: var(--brand);
      margin-bottom: 15px;
    }
    
    .upcoming-service h4 {
      color: var(--text);
      margin-bottom: 10px;
    }
    
    .upcoming-service p {
      color: var(--muted);
      font-size: 14px;
    }
    
    .notify-form {
      display: flex;
      gap: 10px;
      margin-top: 30px;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .notify-form input {
      padding: 12px 16px;
      border-radius: 8px;
      border: 1px solid var(--glass-border);
      background: rgba(0, 0, 0, 0.2);
      color: #fff;
      min-width: 250px;
      text-align: center;
    }
    
    .notify-form button {
      padding: 12px 24px;
      background: var(--brand-gradient);
      color: #001317;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: var(--transition);
    }
    
    .notify-form button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(0, 207, 255, 0.4);
    }
    
    @media (max-width: 1100px) {
      .testimonial-box { flex-basis: 50%; max-width: 50%; }
    }
    @media (max-width: 768px) {
      header { padding: 10px 16px; }
      header h1 { font-size: 20px; }
      header img { height: 40px; width: 40px; }
      .menu-btn { font-size: 16px; padding: 6px 10px; }
      .cart-icon { font-size: 18px; padding: 6px; }
      .hero { min-height: 220px; }
      .hero .hero-content h2 { font-size: 28px !important; margin: 0 0 8px !important; }
      .hero .hero-content p { font-size: 16px !important; }
      .intro-text { padding: 16px; margin: 16px auto 8px; }
      .intro-text h1 { font-size: 26px; }
      .intro-text p { font-size: 16px; }
      section h2 { font-size: 26px; margin: 16px 0 20px; }
      .store { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 16px; }
      .item { padding: 16px; }
      .item img { width: 120px; height: 120px; }
      .item h3 { font-size: 18px; }
      .price { font-size: 16px; }
      .testimonial-box {
        flex-basis: 100%; max-width: 100%; margin: 8px; padding: 20px;
      }
      .slider-btn { padding: 10px 14px; font-size: 18px; }
      .cart-popup { max-width: 100%; }
      .cart-header { padding: 14px 16px; }
      .cart-item { padding: 12px; gap: 10px; }
      .cart-item img { width: 48px; height: 48px; }
      .payment-btn { padding: 12px; font-size: 14px; }
      .filters {
        flex-direction: column;
        align-items: center;
      }
      .item-hover-content {
        display: none;
      }
      .item:hover {
        transform: translateY(-5px);
      }
      .assistant-chat {
        width: 90%;
        left: 5%;
      }
      .product-header {
        flex-direction: column;
      }
      .footer-content {
        grid-template-columns: 1fr;
      }
      .cookie-consent.show {
        flex-direction: column;
        text-align: center;
      }
      .tawkto-float {
        bottom: 150px;
        right: 18px;
        width: 50px;
        height: 50px;
      }
      .smart-assistant { bottom: 90px; }
      .assistant-chat { bottom: 150px; }
      .services-countdown {
        gap: 10px;
      }
      .countdown-item {
        min-width: 70px;
        padding: 12px;
      }
      .countdown-value {
        font-size: 22px;
      }
      .notify-form {
        flex-direction: column;
        align-items: center;
      }
      .notify-form input {
        min-width: 200px;
      }
    }
    @media (max-width: 480px) {
      .store { grid-template-columns: 1fr; }
      .hero { min-height: 180px; border-radius: 14px; }
      .hero .hero-content h2 { font-size: 24px !important; }
      .hero .hero-content p { font-size: 14px !important; }
      .intro-text h1 { font-size: 22px; }
      section h2 { font-size: 22px; }
      .item { padding: 14px; }
      .item img { width: 100px; height: 100px; }
      .btn { padding: 10px 12px; font-size: 14px; }
      .whatsapp-float { width: 50px; height: 50px; font-size: 20px; bottom: 18px; right: 18px; }
      .confirmation-content {
        padding: 20px;
      }
      .confirmation-buttons {
        flex-direction: column;
      }
      .all-services-grid {
        grid-template-columns: 1fr;
      }
      .tawkto-float {
        bottom: 140px;
        right: 15px;
        width: 45px;
        height: 45px;
        font-size: 18px;
      }
      .smart-assistant { bottom: 80px; left: 15px; width: 50px; height: 50px; }
      .assistant-chat { bottom: 140px; left: 5%; width: 90%; }
      .coming-soon-section {
        padding: 40px 15px;
      }
      .coming-soon-icon {
        font-size: 60px;
      }
      .coming-soon-text {
        font-size: 20px;
      }
      .services-countdown {
        gap: 8px;
      }
      .countdown-item {
        min-width: 60px;
        padding: 10px;
      }
      .countdown-value {
        font-size: 18px;
      }
      .countdown-label {
        font-size: 12px;
      }
      .upcoming-services {
        grid-template-columns: 1fr;
      }
      #special-offer-modal .confirmation-content,
      #item-shop-code-modal .confirmation-content {
        padding: 15px;
        max-width: 90%;
      }
      .close-modal { top: -10px; right: -10px; width: 35px; height: 35px; font-size: 20px; }
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulse { 
      0% { box-shadow: 0 0 0 0 rgba(37,211,102,0.7); } 
      70% { box-shadow: 0 0 0 12px rgba(37,211,102,0); } 
      100% { box-shadow: 0 0 0 0 rgba(37,211,102,0); } 
    }
    .fade-in { animation: fadeIn 0.6s ease forwards; }
    .shake { animation: shake 0.5s; }
    @keyframes shake {
      0% { transform: translateX(0); }
      20% { transform: translateX(-5px); }
      40% { transform: translateX(5px); }
      60% { transform: translateX(-5px); }
      80% { transform: translateX(5px); }
      100% { transform: translateX(0); }
    }
    /* نافذة العرض الخاص */
    #special-offer-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 5000;
      justify-content: center;
      align-items: center;
    }
    #special-offer-modal .confirmation-content {
      max-width: 400px;
      text-align: center;
      padding: 25px;
      position: relative;
    }
    @media (max-width: 480px) {
      #special-offer-modal .confirmation-content {
        padding: 15px;
        max-width: 90%;
      }
    }
    /* نافذة كود الايتم شوب */
    #item-shop-code-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 5000;
      justify-content: center;
      align-items: center;
    }
    #item-shop-code-modal .confirmation-content {
      max-width: 400px;
      text-align: center;
      padding: 25px;
      position: relative;
    }
    @media (max-width: 480px) {
      #item-shop-code-modal .confirmation-content {
        padding: 15px;
        max-width: 90%;
      }
    }
  </style>
</head>
<body>
  <!-- نافذة عرض الصور -->
  <div class="image-modal" id="imageModal">
    <div class="modal-content">
      <button class="close-modal" onclick="closeImageModal()">×</button>
      <img id="modalImage" src="zido.jpg" alt="صورة مكبرة">
    </div>
  </div>
  
  <canvas class="bg"></canvas>
  <div class="parallax-layer layer-1"></div>
  <div class="parallax-layer layer-2"></div>
  
  <!-- المساعد الذكي -->
  <div class="smart-assistant" onclick="toggleAssistant()">
    <i class="fas fa-robot"></i>
  </div>
  <div class="assistant-chat" id="assistantChat">
    <div class="assistant-header">
      <i class="fas fa-robot"></i>
      <span>مساعد ZiDo الذكي</span>
    </div>
    <div class="assistant-messages" id="assistantMessages">
      <div class="message assistant">مرحباً! أنا مساعدك الذكي. كيف يمكنني مساعدتك اليوم؟</div>
    </div>
    <div class="assistant-input">
      <input type="text" id="assistantInput" placeholder="اكتب سؤالك هنا...">
      <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
    </div>
  </div>

  <div class="loader" id="loader">
    <div class="loader-content">
      <div class="spinner"></div>
      <p>جاري التحميل...</p>
    </div>
  </div>
  <div class="notification" id="notification">
    <i class="fas fa-check-circle"></i>
    <span id="notification-text"></span>
  </div>
  
  <!-- نافذة الصورة الافتتاحية -->
  <div id="welcome-modal" class="confirmation">
    <div class="confirmation-content">
      <img src="zido.jpg" alt="مرحباً بك في متجر ZiDo" style="width:100%;border-radius:10px;margin-bottom:20px;">
      <div class="confirmation-buttons">
        <button class="btn" onclick="closeWelcomeModal()">ابدأ التسوق</button>
      </div>
    </div>
  </div>

  <!-- موافقة الكوكيز -->
  <div class="cookie-consent" id="cookieConsent">
    <div class="cookie-text">
      <p>🍪 نستخدم ملفات تعريف الارتباط لتحسين تجربتك في المتجر. باستخدامك للموقع، فإنك توافق على سياسة الخصوصية الخاصة بنا.</p>
    </div>
    <div class="cookie-buttons">
      <button class="btn" onclick="acceptCookies()">موافق</button>
      <button class="btn" style="background: var(--glass);" onclick="closeCookies()">رفض</button>
    </div>
  </div>

  <header>
    <div class="brand">
      <img src="logo.jpg" alt="شعار ZiDo" loading="lazy" />
      <h1>متجر ZiDo</h1>
    </div>
    <div class="top-actions">
      <a href="https://wa.me/966537029503" target="_blank" class="whatsapp-header-btn">
        <i class="fab fa-whatsapp"></i>
        تواصل معنا
      </a>
      <span class="menu-btn" onclick="toggleMenu()"><i class="fas fa-bars"></i> القائمة</span>
      <div id="cartIcon" class="cart-icon" onclick="toggleCart()">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-count" id="cart-count">0</span>
      </div>
    </div>
  </header>
  
  <!-- شريط الأخبار -->
  <div class="news-ticker">
    <div class="news-ticker__content">
      <i class="fas fa-bullhorn"></i> عرض خاص: 10,000 لايك تيك توك ب 7 ريال فقط!
      <i class="fas fa-star"></i>  جديد: يوزرات تيك توك حصرية بأسعار مميزة!
      <i class="fas fa-gift"></i> استخدم الكود "ZIDO10" للحصول على خصم 10% عند الدفع!
      <i class="fas fa-bullhorn"></i> توصيل فوري لجميع الخدمات!
    </div>
  </div>
  
  <!-- شهادات الثقة -->
  <div class="trust-badges">
    <div class="trust-badge"><i class="fas fa-lock"></i> دفع آمن</div>
    <div class="trust-badge"><i class="fas fa-shield-alt"></i> تشفير SSL</div>
    <div class="trust-badge"><i class="fab fa-whatsapp"></i> دعم فوري</div>
    <div class="trust-badge"><i class="fas fa-users"></i> +,200 عميل</div>
  </div>
  
  <!-- سياسة الإرجاع -->
  <div class="return-policy">
    🛡️ <strong>ضمان استرداد خلال 24 ساعة</strong> إذا لم يتم التوصيل
  </div>
  
  <!-- شريط البحث -->
  <div class="search-container" id="searchContainer">
    <input type="text" class="search-box" id="searchInput" placeholder="ابحث عن منتج..." aria-label="بحث عن منتج">
    <i class="fas fa-search search-icon"></i>
    <div class="search-suggestions" id="searchSuggestions"></div>
  </div>
  
  <!-- القائمة الجانبية -->
  <nav id="sideMenu" class="side-menu" aria-label="القائمة الجانبية">
    <a href="javascript:void(0)" class="closebtn" onclick="toggleMenu()" aria-label="إغلاق القائمة">×</a>
    <h3>القائمة الرئيسية</h3>
    <a href="#" onclick="showSection('home')"><i class="fas fa-home"></i> الرئيسية</a>
    <a href="#" onclick="showSection('all-services')"><i class="fas fa-th-large"></i> جميع الخدمات</a>
    <a href="#" onclick="showSection('fortnite')"><i class="fas fa-gamepad"></i> خدمات فورتنايت</a>
    <a href="#" onclick="showSection('roblox')"><i class="fas fa-gamepad"></i> خدمات روبلكس</a>
    <a href="#" onclick="showSection('tiktok')"><i class="fab fa-tiktok"></i> خدمات تيك توك</a>
    <a href="#" onclick="showSection('instagram')"><i class="fab fa-instagram"></i> خدمات انستغرام</a>
    <a href="#" onclick="showSection('whatsapp')"><i class="fab fa-whatsapp"></i> خدمات واتساب</a>
    <a href="#" onclick="showSection('other')"><i class="fas fa-ellipsis-h"></i> خدمات أخرى</a>
    <a href="#" onclick="showSection('about')"><i class="fas fa-info-circle"></i> عن المتجر</a>
    <a href="#" onclick="showSection('support')"><i class="fas fa-headset"></i> الدعم الفني</a>
    <a href="#" onclick="showSection('admin')"><i class="fas fa-cog"></i> إدارة المشتركين</a>
    <div class="search-menu-btn" onclick="toggleSearch()">
      <i class="fas fa-search"></i> بحث
    </div>
  </nav>
  
  <main>
    <!-- الرئيسية -->
    <section id="home" class="active">
      <div class="hero">
        <div class="hero-content">
          <img src="piner.jpg" alt="مرحبًا بكم في متجر ZiDo" class="welcome-image" onclick="openImageModal('piner.jpg')">
          <p style="margin:0;color:#e8f6ff;font-size:20px">أفضل العروض والخدمات الرقمية بين يديك</p>
        </div>
      </div>
      <div class="intro-text">
        <h1>🎉 لقد وصلت إلى وجهتك</h1>
        <p>متجر ZiDo — عالم رائع بانتظارك</p>
      </div>
      
      <!-- نموذج الاشتراك -->
      <div class="subscribe-form">
        <input type="email" id="subscribe-email" placeholder="بريدك الإلكتروني للاشتراك في العروض">
        <input type="tel" id="subscribe-phone" placeholder="رقم الهاتف (اختياري)">
        <button onclick="subscribeToOffers()"><i class="fas fa-paper-plane"></i> اشترك</button>
      </div>
      
      <h2>🔥 المنتجات الأكثر مبيعًا</h2>
      <div class="store" id="featured-products">
        <!-- سيتم إضافة المنتجات ديناميكياً -->
      </div>
    </section>
    
    <!-- جميع الخدمات -->
    <section id="all-services">
      <h2>📦 جميع الخدمات</h2>
      <div class="all-services-grid">
        <div class="service-category" onclick="showSection('fortnite')">
          <i class="fas fa-gamepad"></i>
          <h3>فورتنايت</h3>
          <p>فيبوكس، الطاقم الشهري، حسابات</p>
        </div>
        <div class="service-category" onclick="showSection('roblox')">
          <i class="fas fa-gamepad"></i>
          <h3>روبلكس</h3>
          <p>عملات روبلكس، عناصر نادرة</p>
        </div>
        <div class="service-category" onclick="showSection('tiktok')">
          <i class="fab fa-tiktok"></i>
          <h3>تيك توك</h3>
          <p>متابعين، لايكات، مشاهدات، يوزرات</p>
        </div>
        <div class="service-category" onclick="showSection('instagram')">
          <i class="fab fa-instagram"></i>
          <h3>انستغرام</h3>
          <p>متابعين، لايكات، مشاهدات</p>
        </div>
        <div class="service-category" onclick="showSection('whatsapp')">
          <i class="fab fa-whatsapp"></i>
          <h3>واتساب</h3>
          <p>أرقام تفعيل، روبوتات</p>
        </div>
        <div class="service-category" onclick="showSection('other')">
          <i class="fas fa-ellipsis-h"></i>
          <h3>خدمات أخرى</h3>
          <p>يوتيوب، تويتر، فيسبوك</p>
        </div>
      </div>
    </section>
    
    <!-- صفحة المنتج المفصل -->
    <section id="product-detail" class="product-detail">
      <!-- سيتم تعبئتها ديناميكياً -->
    </section>
    
    <!-- فورتنايت -->
    <section id="fortnite">
      <h2>🕹️ خدمات فورتنايت</h2>
      <div class="filters">
        <button class="filter-btn active" data-filter="all">الكل</button>
        <button class="filter-btn" data-filter="sale">عروض خاصة</button>
        <button class="filter-btn" data-filter="vbucks">فيبوكس</button>
        <button class="filter-btn" data-filter="crew">الطاقم الشهري</button>
        <button class="filter-btn" data-filter="account">حسابات</button>
      </div>
      <div class="store" id="fortnite-products">
        <!-- سيتم إضافة المنتجات ديناميكياً -->
      </div>
    </section>
    
    <!-- روبلكس -->
    <section id="roblox">
      <h2>🎮 خدمات روبلكس</h2>
      <div class="filters">
        <button class="filter-btn active" data-filter="all">الكل</button>
        <button class="filter-btn" data-filter="sale">عملات روبلكس</button>
      </div>
      <div class="store" id="roblox-products">
        <!-- سيتم إضافة المنتجات ديناميكياً -->
      </div>
    </section>
    
    <!-- تيك توك -->
    <section id="tiktok">
      <h2>🎵 خدمات تيك توك</h2>
      <div class="filters">
        <button class="filter-btn active" data-filter="all">الكل</button>
        <button class="filter-btn" data-filter="followers">متابعين</button>
        <button class="filter-btn" data-filter="likes">لايكات</button>
        <button class="filter-btn" data-filter="views">مشاهدات</button>
        <button class="filter-btn" data-filter="user">يوزرات</button>
      </div>
      <div class="store" id="tiktok-products">
        <!-- سيتم إضافة المنتجات ديناميكياً -->
      </div>
    </section>
    
    <!-- انستغرام -->
    <section id="instagram">
      <h2>📸 خدمات انستغرام</h2>
      <div class="filters">
        <button class="filter-btn active" data-filter="all">الكل</button>
        <button class="filter-btn" data-filter="followers">متابعين</button>
        <button class="filter-btn" data-filter="likes">لايكات</button>
        <button class="filter-btn" data-filter="views">مشاهدات</button>
      </div>
      <div class="store" id="instagram-products">
        <!-- سيتم إضافة المنتجات ديناميكياً -->
      </div>
    </section>
    
    <!-- واتساب -->
    <section id="whatsapp">
      <h2>💬 خدمات واتساب</h2>
      <div class="store" id="whatsapp-products">
        <!-- سيتم إضافة المنتجات ديناميكياً -->
      </div>
    </section>
    
    <!-- خدمات أخرى -->
    <section id="other">
      <h2>🛠️ خدمات أخرى</h2>
      
      <div class="coming-soon-section">
        <div class="coming-soon-icon">
          <i class="fas fa-tools"></i>
        </div>
        
        <h2 class="coming-soon-text">خدمات قريباً!</h2>
        
        <p class="coming-soon-description">
          نحن نعمل على إضافة خدمات جديدة ومميزة لتلبية جميع احتياجاتك الرقمية. 
          ابقَ متابعًا لتكون أول من يحصل على هذه الخدمات الحصرية!
        </p>
        
        <div class="services-countdown">
          <div class="countdown-item">
            <span class="countdown-value" id="days">14</span>
            <span class="countdown-label">يوم</span>
          </div>
          <div class="countdown-item">
            <span class="countdown-value" id="hours">08</span>
            <span class="countdown-label">ساعة</span>
          </div>
          <div class="countdown-item">
            <span class="countdown-value" id="minutes">45</span>
            <span class="countdown-label">دقيقة</span>
          </div>
          <div class="countdown-item">
            <span class="countdown-value" id="seconds">30</span>
            <span class="countdown-label">ثانية</span>
          </div>
        </div>
        
        <div class="upcoming-services">
          <div class="upcoming-service">
            <i class="fab fa-youtube"></i>
            <h4>خدمات يوتيوب</h4>
            <p>مشتركين، مشاهدات، لايكات</p>
          </div>
          <div class="upcoming-service">
            <i class="fab fa-twitter"></i>
            <h4>خدمات تويتر</h4>
            <p>متابعين، إعجابات، رتويت</p>
          </div>
          <div class="upcoming-service">
            <i class="fab fa-facebook"></i>
            <h4>خدمات فيسبوك</h4>
            <p>معجبين، متابعين، تفاعل</p>
          </div>
          <div class="upcoming-service">
            <i class="fas fa-gamepad"></i>
            <h4>خدمات ألعاب إضافية</h4>
            <p>PUBG، Call of Duty، وغيرها</p>
          </div>
        </div>
        
        <div class="notify-form">
          <input type="email" id="notify-email" placeholder="بريدك الإلكتروني للإشعارات">
          <button onclick="subscribeForUpdates()"><i class="fas fa-bell"></i> إشعارني عند الإطلاق</button>
        </div>
      </div>
    </section>
    
    <!-- عن المتجر -->
    <section id="about">
      <h2>ℹ️ عن المتجر</h2>
      <div class="about-section">
        <h3>من نحن</h3>
        <p>متجر ZiDo هو وجهتك الأولى لشراء جميع الخدمات الرقمية مثل شحن الألعاب وخدمات وسائل التواصل الاجتماعي. نحن نقدم خدمات عالية الجودة بأسعار تنافسية وبدعم فني على مدار الساعة.</p>
      </div>
      <div class="about-section">
        <h3>لماذا تختارنا؟</h3>
        <ul style="list-style-type: none; padding: 0;">
          <li style="margin-bottom: 10px; padding-right: 20px; position: relative;">
            <i class="fas fa-check" style="color: var(--success); position: absolute; right: 0; top: 5px;"></i>
            أسعارنا مناسبة للجميع
          </li>
          <li style="margin-bottom: 10px; padding-right: 20px; position: relative;">
            <i class="fas fa-check" style="color: var(--success); position: absolute; right: 0; top: 5px;"></i>
            خدمة عملاء على مدار الساعة
          </li>
          <li style="margin-bottom: 10px; padding-right: 20px; position: relative;">
            <i class="fas fa-check" style="color: var(--success); position: absolute; right: 0; top: 5px;"></i>
            تشكيلة واسعة من الخدمات
          </li>
          <li style="margin-bottom: 10px; padding-right: 20px; position: relative;">
            <i class="fas fa-check" style="color: var(--success); position: absolute; right: 0; top: 5px;"></i>
            توصيل سريع للخدمات
          </li>
        </ul>
      </div>
    </section>
    
    <section id="support">
      <h2>🛠️ الدعم الفني</h2>
      <div class="about-section">
        <h3>كيفية التواصل معنا</h3>
        <p>يمكنك التواصل معنا عبر القنوات التالية للحصول على الدعم الفني:</p>
        <ul style="list-style-type: none; padding: 0;">
          <li style="margin-bottom: 10px; padding-right: 20px; position: relative;">
            <i class="fab fa-whatsapp" style="color: var(--accent); position: absolute; right: 0; top: 5px;"></i>
            واتساب: <a href="https://wa.me/966537029503" target="_blank">966537029503</a>
          </li>
          <li style="margin-bottom: 10px; padding-right: 20px; position: relative;">
            <i class="fas fa-envelope" style="color: var(--accent); position: absolute; right: 0; top: 5px;"></i>
            البريد الإلكتروني: <a href="mailto:support@zido.com">support@zido.com</a>
          </li>
        </ul>
      </div>
    </section>
    
    <!-- إدارة المشتركين -->
    <section id="admin">
      <h2>🛠️ إدارة المشتركين</h2>
      <div class="about-section">
        <h3>لوحة التحكم</h3>
        <div class="password-form">
          <input type="password" id="admin-password" placeholder="كلمة المرور">
          <button onclick="loginAdmin()">دخول</button>
        </div>
        <div id="admin-panel" style="display: none; margin-top: 20px;">
          <h4 style="color: var(--brand);">المشتركون في العروض</h4>
          <div style="overflow-x: auto;">
            <table id="subscribers-table">
              <thead>
                <tr>
                  <th>البريد الإلكتروني</th>
                  <th>رقم الهاتف</th>
                  <th>تاريخ الاشتراك</th>
                </tr>
              </thead>
              <tbody id="subscribers-list">
                <!-- سيتم تعبئتها ديناميكياً -->
              </tbody>
            </table>
          </div>
          <div style="margin-top: 20px; text-align: center;">
            <button class="btn" onclick="exportSubscribers()"><i class="fas fa-download"></i> تصدير البيانات</button>
            <button class="btn" style="background: var(--danger); margin-left: 10px;" onclick="clearAllSubscribers()"><i class="fas fa-trash"></i> مسح الكل</button>
          </div>
        </div>
      </div>
    </section>
    
  </main>
  
  <!-- الفوتر -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-section">
        <h3>متجر ZiDo</h3>
        <p>وجهتك الأولى لشراء جميع الخدمات الرقمية. نقدم خدمات عالية الجودة بأسعار تنافسية.</p>
        <div class="social-links">
          <a href="https://wa.me/966537029503" target="_blank"><i class="fab fa-whatsapp"></i></a>
          <a href="https://instagram.com/zidstoresa" target="_blank"><i class="fab fa-instagram"></i></a>
          <a href="https://tiktok.com/@zido" target="_blank"><i class="fab fa-tiktok"></i></a>
        </div>
      </div>
      
      <div class="footer-section">
        <h3>روابط سريعة</h3>
        <ul class="footer-links">
          <li><a href="#" onclick="showSection('home')"><i class="fas fa-home"></i> الرئيسية</a></li>
          <li><a href="#" onclick="showSection('all-services')"><i class="fas fa-th-large"></i> جميع الخدمات</a></li>
          <li><a href="#" onclick="showSection('about')"><i class="fas fa-info-circle"></i> عن المتجر</a></li>
          <li><a href="#" onclick="showSection('support')"><i class="fas fa-headset"></i> الدعم الفني</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>معلومات الاتصال</h3>
        <ul class="footer-links">
          <li><a href="https://wa.me/966537029503" target="_blank"><i class="fab fa-whatsapp"></i> واتساب: 966537029503</a></li>
          <li><a href="https://instagram.com/zidostoresa" target="_blank"><i class="fab fa-instagram"></i> انستغرام: @zidostoresa</a></li>
          <li><a href="mailto:support@zido.com"><i class="fas fa-envelope"></i> البريد: support@zido.com</a></li>
          <li><a href="#"><i class="fas fa-clock"></i> متاح 24/7</a></li>
        </ul>
      </div>
      
      <div class="footer-section">
        <h3>المعلومات</h3>
        <ul class="footer-links">
          <li><a href="#" onclick="showPrivacyPolicy()"><i class="fas fa-shield-alt"></i> سياسة الخصوصية</a></li>
          <li><a href="#" onclick="showTerms()"><i class="fas fa-file-contract"></i> الشروط والأحكام</a></li>
          <li><a href="#" onclick="showReturnPolicy()"><i class="fas fa-undo"></i> سياسة الإرجاع</a></li>
          <li><a href="#" onclick="showSection('support')"><i class="fas fa-question-circle"></i> الأسئلة الشائعة</a></li>
        </ul>
      </div>
    </div>
    
    <div class="footer-bottom">
      <p>&copy; 2025 متجر ZiDo. جميع الحقوق محفوظة.</p>
    </div>
  </footer>
  
  <!-- السلة المنبثقة -->
  <div id="cartOverlay" class="cart-overlay">
    <div class="cart-popup" role="dialog" aria-modal="true" aria-labelledby="cartTitle">
      <div class="cart-header">
        <h3 id="cartTitle"><i class="fas fa-shopping-cart"></i> سلة التسوق</h3>
        <button class="close-cart" onclick="toggleCart()" aria-label="إغلاق السلة">×</button>
      </div>
      <div id="cart-list" class="cart-list">
        <div class="empty-cart" id="empty-cart">
          <i class="fas fa-shopping-basket"></i>
          <p>سلة التسوق فارغة</p>
        </div>
      </div>
      <div class="cart-footer">
        <div style="margin: 12px 0; text-align: center;">
          <input type="text" id="discount-code" placeholder="أدخل كود الخصم" style="
            width: 100%;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid var(--glass-border);
            background: rgba(0, 0, 0, 0.2);
            color: #fff;
            text-align: center;
          ">
          <button class="btn" style="margin-top: 8px; background: var(--success);" onclick="applyDiscount()">
            تطبيق الكود
          </button>
        </div>
        <div class="total"><strong>المجموع:</strong> <span id="total">0</span> ريال</div>
        <button class="payment-btn whatsapp-btn" onclick="checkout('عبر فيزا/ماستركارد/ابل بي')"><i class="fab fa-whatsapp"></i> (فيزا/ماستركارد/ابل بي)</button>
        <button class="payment-btn stc-btn" onclick="checkout('STC Pay')"><i class="fas fa-mobile-alt"></i> الدفع عبر STC Pay</button>
        <button class="payment-btn visa-btn" onclick="checkout('برق/يوربي')"><i class="fas fa-bolt"></i> الدفع عبر برق / يوربي</button>
        <button class="payment-btn mada-btn" onclick="checkout('PayPal')"><i class="fab fa-paypal"></i> الدفع عبر PayPal</button>
        <p class="note">⚠️ يوجد رسوم إضافية عند الدفع بالفيزا — برجاء التأكد قبل الإتمام.</p>
        <button class="btn" style="margin-top:10px;background:#2d3647;color:#fff" onclick="toggleCart()"><i class="fas fa-arrow-left"></i> متابعة التسوق</button>
      </div>
    </div>
  </div>
  
  <!-- صفحة تأكيد الطلب -->
  <div id="confirmation" class="confirmation">
    <div class="confirmation-content">
      <h3>تم إرسال طلبك بنجاح! 🎉</h3>
      <p>سيتم التواصل معك خلال دقائق لتأكيد الطلب وتفاصيل الدفع.</p>
      <p>رقم الطلب: <strong id="order-number">ZD-12345</strong></p>
      <div class="confirmation-buttons">
        <button class="btn" onclick="closeConfirmation()">مواصلة التسوق</button>
        <button class="btn" style="background: var(--accent);" onclick="closeConfirmation(); showSection('home');">العودة للرئيسية</button>
      </div>
    </div>
  </div>
  
  <!-- زر Tawk.to العائم -->
  <div class="tawkto-float" onclick="openTawkTo()">
    <i class="fas fa-comments"></i>
  </div>
  
  <!-- زر واتساب عائم -->
  <a href="https://wa.me/966537029503" target="_blank" class="whatsapp-float" aria-label="تواصل واتساب"><i class="fab fa-whatsapp"></i></a>
  
  <!-- JavaScript -->
  <script>
    /* ====== المتغيرات العامة ====== */
    let cart = JSON.parse(localStorage.getItem('zidoCart')) || [];
    let wishlist = JSON.parse(localStorage.getItem('zidoWishlist')) || [];
    let subscribers = JSON.parse(localStorage.getItem('zidoSubscribers')) || [];
    let discountApplied = false;
    let originalTotalBeforeDiscount = 0;
    const ADMIN_PASSWORD = "zido123";
    
    /* ====== أكواد الخصم ====== */
    const validDiscountCodes = {
      "ZIDO10": 0.10,
      "SAVE15": 0.15,
      "VIP20": 0.20,
    };
    
    /* ====== اليوزرات مع خيارات متعددة ====== */
    const tiktokUsernames = [
      {
        id: 1001,
        name: "يوزرات تيك توك ثلاثية/أشباه ثلاثية/مكررة",
        price: 15,
        image: "تيك توك لوقو.png",
        category: "tiktok",
        description: "يوزرات تيك توك  بأسعار مميزة",
        fullDescription: "اختر من مجموعة اليوزرات الحصرية:\n• اليوزر يسلم إيميل وكلمة سر ما إمكانية تغير الإيميل وكلمة السر وإضافة رقم جوال\n• \n• تسليم فوري بعد الدفع\n• ضمان من الباند(المتجر غير مسؤول عن باند سوءالاستخدام والا نتهاك لخصوصية البرنامج)",
        options: [
          { 
            label: "@x_kf يوزر مميز شبه ثلاثي", 
            price: 15,
            serial: "ZD-TK-VIP1"
          },
          { 
            label: "@.fhf شبه ثلاثي مكرر يوزر مميز", 
            price: 25,
            serial: "ZD-TK-PRM1"
          },
          { 
            label: "@Y9a9 رباعي مكرر", 
            price: 15,
            serial: "ZD-TK-EXC1"
          },
          { 
            label: "@2fx2 رباعي مكرر", 
            price: 15,
            serial: "ZD-TK-GLD1"
          },
          { 
            label: "@h7i7 رباعي مكرر", 
            price: 35, 
            serial: "ZD-TK-DIA1"
          }
        ]
      },
      {
        id: 1002,
        name: "يوزرات تيك توك رباعية",
        price: 5,
        image: "تيك توك لوقو.png",
        category: "tiktok",
        description: "يوزرات تيك توك نادرة وجميلة",
        fullDescription: "مجموعة يوزرات مميزة ورخيصة:\n• اليوزر يسلم إيميل وكلمة سر ما إمكانية تغير الإيميل وكلمة السر وإضافة رقم جوال\n• \n• تسليم فوري بعد الدفع\n• ضمان من الباند(المتجر غير مسؤول عن باند سوءالاستخدام والا نتهاك لخصوصية البرنامج)",
        options: [
          { 
            label: "يوزر @jr67", 
            price: 5,
            serial: "ZD-TK-971"
          },
          { 
            label: "يوزر @yusz", 
            price: 5,
            serial: "ZD-TK-972"
          },
          { 
            label: "يوزر @lvp6", 
            price: 5,
            serial: "ZD-TK-973"
          },
          { 
            label: "يوزر @jbzc", 
            price: 5,
            serial: "ZD-TK-974"
          },
          { 
            label: "يوزر @fmjn", 
            price: 5,
            serial: "ZD-TK-975"
          },
          { 
            label: "يوزر @803g", 
            price: 5,
            serial: "ZD-TK-976"
          },
          { 
            label: "يوزر @vbo1", 
            price: 5,
            serial: "ZD-TK-977"
          },
          { 
            label: "يوزر @qmy0", 
            price: 5,
            serial: "ZD-TK-978"
          },
          { 
            label: "يوزر @dao2", 
            price: 5,
            serial: "ZD-TK-542"
          },
          { 
            label: "يوزر @lau4", 
            price: 5,
            serial: "ZD-TK-543"
          },
          { 
            label: "يوزر @l47w", 
            price: 5,
            serial: "ZD-TK-970"
          },
          { 
            label: "يوزر @ya69", 
            price: 5,
            serial: "ZD-TK-971"
          },
          { 
            label: "يوزر @5zm2", 
            price: 5,
            serial: "ZD-TK-972"
          },
          { 
            label: "يوزر @cywr", 
            price: 5,
            serial: "ZD-TK-973"
          },
          { 
            label: "يوزر @fu8t", 
            price: 5,
            serial: "ZD-TK-974"
          },
          { 
            label: "يوزر @gqi6", 
            price: 5,
            serial: "ZD-TK-975"
          },
          { 
            label: "يوزر @1zpi", 
            price: 5,
            serial: "ZD-TK-976"
          },
          { 
            label: "يوزر @lym1", 
            price: 5,
            serial: "ZD-TK-977"
          },
          { 
            label: "يوزر @osgu", 
            price: 5,
            serial: "ZD-TK-978"
          },
          { 
            label: "يوزر @hm0n", 
            price: 5,
            serial: "ZD-TK-979"
          },
          { 
            label: "يوزر @fmjn", 
            price: 5,
            serial: "ZD-TK-980"
          },
          { 
            label: "يوزر @o7k9", 
            price: 5,
            serial: "ZD-TK-981"
          },
          { 
            label: "يوزر @cp82", 
            price: 5,
            serial: "ZD-TK-981"
          },
          { 
            label: "يوزر @iho1", 
            price: 5,
            serial: "ZD-TK-982"
          },
          { 
            label: "يوزر @cp82", 
            price: 5,
            serial: "ZD-TK-983"
          },
          { 
            label: "يوزر @bek4", 
            price: 5,
            serial: "ZD-TK-984"
          },
          { 
            label: "يوزر @3kij", 
            price: 5,
            serial: "ZD-TK-985"
          },
          { 
            label: "يوزر @3h8s", 
            price: 5,
            serial: "ZD-TK-986"
          },
          { 
            label: "يوزر @g5m7", 
            price: 5,
            serial: "ZD-TK-987"
          },
          { 
            label: "يوزر @aosv", 
            price: 5,
            serial: "ZD-TK-988"
          },
          { 
            label: "يوزر @isjf", 
            price: 5,
            serial: "ZD-TK-989"
          },
          { 
            label: "يوزر @y2j6", 
            price: 5,
            serial: "ZD-TK-990"
          },
          { 
            label: "يوزر @hxfk", 
            price: 5,
            serial: "ZD-TK-991"
          },
          { 
            label: "يوزر @ru4z", 
            price: 5,
            serial: "ZD-TK-992"
          },
          { 
            label: "يوزر @7oz6", 
            price: 5,
            serial: "ZD-TK-993"
          },
          { 
            label: "يوزر @7y1n", 
            price: 5,
            serial: "ZD-TK-994"
          },
          { 
            label: "يوزر @18yh", 
            price: 5,
            serial: "ZD-TK-995"
          },
          { 
            label: "يوزر @b05j", 
            price: 5,
            serial: "ZD-TK-996"
          },
          { 
            label: "يوزر @f4id", 
            price: 5,
            serial: "ZD-TK-997"
          },
          { 
            label: "يوزر @rf9y", 
            price: 5,
            serial: "ZD-TK-997"
          },
          { 
            label: "يوزر @ths6", 
            price: 5,
            serial: "ZD-TK-998"
          },
          { 
            label: "يوزر @ob4l", 
            price: 5,
            serial: "ZD-TK-999"
          },
          { 
            label: "يوزر @ni9a", 
            price: 5,
            serial: "ZD-TK-1000"
          },
          { 
            label: "يوزر @816w", 
            price: 5,
            serial: "ZD-TK-1001"
          },
          { 
            label: "يوزر @60ds", 
            price: 5,
            serial: "ZD-TK-1002"
          },
          { 
            label: "يوزر @snv0", 
            price: 5,
            serial: "ZD-TK-1003"
          },
          { 
            label: "يوزر @ozr5", 
            price: 5,
            serial: "ZD-TK-1005"
          },
          { 
            label: "يوزر @ypk3", 
            price: 5,
            serial: "ZD-TK-1004"
          }
        ]
      }
    ];
    
    /* ====== تهيئة بيانات المخزون لليوزرات ====== */
    function initializeUsernamesStock() {
      // نستخدم نظام بسيط يعتمد على localStorage
      if (!localStorage.getItem('tiktokUsernameStockInitialized')) {
        localStorage.setItem('tiktokUsernameStockInitialized', 'true');
      }
    }
    
    /* ====== التحقق من توفر اليوزر ====== */
    function isUsernameAvailable(serial) {
      // بسّطنا النظام: كل اليوزرات متاحة دائمًا إلا إذا بيعت في هذه الجلسة
      let soldUsernames = JSON.parse(localStorage.getItem('soldUsernames')) || [];
      return !soldUsernames.includes(serial);
    }
    
    /* ====== تحديث حالة اليوزر بعد البيع ====== */
    function markUsernameAsSold(serial) {
      let soldUsernames = JSON.parse(localStorage.getItem('soldUsernames')) || [];
      if (!soldUsernames.includes(serial)) {
        soldUsernames.push(serial);
        localStorage.setItem('soldUsernames', JSON.stringify(soldUsernames));
        return true;
      }
      return false;
    }
    
    /* ====== إعادة تعيين المخزون (للتجربة) ====== */
    function resetUsernameStock() {
      localStorage.removeItem('soldUsernames');
      localStorage.removeItem('tiktokUsernameStockInitialized');
      showNotification('تم إعادة تعيين مخزون اليوزرات', 'success');
      loadCategoryProducts('tiktok');
    }
    
    /* ====== البيانات الأساسية - المنتجات ====== */
    const products = {
      featured: [
        {
          id: 1,
          name: "الطاقم الشهري",
          price: 25,
          image: "crew.png",
          category: "fortnite",
          description: "احصل على الطاقم الشهري لفورتنايت مع 1000 فيبوكس وسمة حصرية.",
          fullDescription: "الطاقم الشهري يمنحك:\n• 1000 فيبوكس شهرياً\n• سمة حصرية للطاقم\n• مجموعة من العناصر الحصرية\n• تحديثات شهرية مستمرة\n\nالتوصيل: فوري بعد التأكد من الدفع\nالضمان: 30 يوم"
        },
        {
          id: 2,
          name: "10000 لايك تيك توك",
          price: 7,
          image: "لايكات تيك توك.png",
          category: "tiktok",
          description: "10,000 لايك حقيقي لحسابك على تيك توك. خدمة آمنة 100% مع ضمان الاستمرارية.",
          fullDescription: "10,000 لايك تيك توك:\n• لايكات حقيقية 100%\n• بداية سريعة خلال دقائق\n• خدمة آمنة لا تؤثر على الحساب\n• ضمان استمرارية 30 يوماً\n\nمدة التوصيل: 5-30 دقيقة\nالضمان: 30 يوم"
        },
        {
          id: 3,
          name: "يوزرات تيك توك حصرية",
          price: 15,
          image: "yuser1.png",
          category: "tiktok",
          description: "يوزرات تيك توك حصرية بأسعار مميزة.",
          fullDescription: "يوزرات تيك توك حصرية:\n• مجموعة يوزرات حصرية ونادرة\n• كل يوزر له مخزون محدود\n• تسليم فوري بعد الدفع\n• ضمان الاستمرارية 30 يوماً\n\nالتوصيل: فوري\nالضمان: 30 يوم"
        }
      ],
      fortnite: [
        {
          id: 4,
          name: "الطاقم الشهري",
          price: 25,
          image: "crew.png",
          category: "fortnite",
          description: "الطاقم الشهري مع 1000 فيبوكس وسمة حصرية.",
          fullDescription: "الطاقم الشهري يمنحك:\n• 1000 فيبوكس شهرياً\n• سمة حصرية للطاقم\n• مجموعة من العناصر الحصرية\n• تحديثات شهرية مستمرة\n\nالتوصيل: فوري بعد التأكد من الدفع\nالضمان: 30 يوم"
        },
        {
          id: 5,
          name: "إهداء فيبوكس",
          price: 14,
          image: "اهداء فيبوكس.png",
          category: "fortnite",
          description: "إهداء فيبوكس بكميات مختلفة تناسب احتياجاتك.",
          fullDescription: "إهداء فيبوكس:\n• 800 فيبوكس ب 14 ريال\n• 1000 فيبوكس ب 18 ريال\n• 1200 فيبوكس ب 21 ريال\n• 1500 فيبوكس ب 26 ريال\n• 1800 فيبوكس ب 28 ريال\n• 2000 فيبوكس ب 34 ريال\n\nالتوصيل: بعد الدفع بيتم إرسال لحسابك\nالضمان: 30 يوم",
          options: [
            { label: "800 فيبوكس", price: 14 },
            { label: "1000 فيبوكس", price: 18 },
            { label: "1200 فيبوكس", price: 21 },
            { label: "1500 فيبوكس", price: 26 },
            { label: "1800 فيبوكس", price: 28 },
            { label: "2000 فيبوكس", price: 34 }
          ]
        },
        {
          id: 6,
          name: "حقيبة صحوة الظلال فورت نايت",
          price: 34,
          image: "حقيبة صحوة الظلال فورت نايت.png",
          category: "fortnite",
          description: "حقيبة صحوة الظلال الحصرية لفورتنايت.",
          fullDescription: "محتويات الحزمة:\n• زيّ جمجمة الظل\n• زينة ظهر حقيبة ستارك\n• زيّ طائر الظل\n• زينة ظهر أجنحة طائر الظل\n• زيّ الظل المثالي\n• زينة ظهر الأجنحة المثالية\n• غلاف المصفوفة\n\nالتوصيل: من 5 دقائق إلى 24 ساعة"
        },
        {
          id: 7,
          name: "حزمة مهام حارسة غولدنباين",
          price: 38,
          image: "حزمة مهام حارسة غولدنباين.png",
          category: "fortnite",
          description: "حزمة مهام حارسة غولدنباين الحصرية.",
          fullDescription: "حزمة مهام حارسة غولدنباين:\n• زيّ آمارا الحارسة\n• زينة ظهر سيربيكوس غولدنباين\n• فأس صولجان غولدنباين\n• اربح ما يصل إلى 1500 فيبوكس\n\nالتوصيل: فوري"
        },
        {
          id: 8,
          name: "حزمة التحلي بالايجابية فورت نايت",
          price: 16,
          image: "حزمة التحلي بالايجابية فورت نايت.png",
          category: "fortnite",
          description: "حزمة التحلي بالايجابية الحصرية.",
          fullDescription: "حزمة التحلي بالايجابية:\n• 600 من نقود V-Bucks\n• زيّ نحولة\n• زينة ظهر دوّار الشمس\n• فأس صولجان العسل\n\nالتوصيل: من 5 دقائق إلى 24 ساعة"
        },
        {
          id: 9,
          name: "حزمة فرقة الجماجم فورت نايت",
          price: 38,
          image: "حزمة فرقة الجماجم فورت نايت.png",
          category: "fortnite",
          description: "حزمة فرقة الجماجم الحصرية لفورتنايت.",
          fullDescription: "حزمة فرقة الجماجم:\n• 4 سكنات\n• 3 شنطات\n• بيكاكسين\n• مظلة\n• لون سلاح\n\nالتوصيل: من 5 دقائق إلى 24 ساعة"
        },
        {
          id: 10,
          name: "حزمة مسحور ومسكون فورت نايت",
          price: 50,
          image: "حزمة مسحور ومسكون فورت نايت.png",
          category: "fortnite",
          description: "حزمة مسحور ومسكون الحصرية والنادرة.",
          fullDescription: "حزمة مسحور ومسكون:\n• 🔹 زي غريتا غريم الغامض والفريد\n• 🔹 أداة حصاد شبحيّة مسكونة\n• 🔹 1500 من نقود V-Bucks 💸\n• إمكانية الوصول الكامل إلى طور Save the World\n\nالتوصيل: من 5 دقائق إلى 24 ساعة"
        }
      ],
      tiktok: [
        {
          id: 11,
          name: "10000 لايك تيك توك",
          price: 7,
          image: "لايكات تيك توك.png",
          category: "tiktok",
          description: "10,000 لايك حقيقي مع ضمان الاستمرارية.",
          fullDescription: "10,000 لايك تيك توك:\n• لايكات حقيقية 100%\n• بداية سريعة خلال دقائق\n• خدمة آمنة لا تؤثر على الحساب\n• ضمان استمرارية 30 يوماً\n\nمدة التوصيل: من 1 إلى 24 ساعة\nالضمان: 30 يوم"
        },
        {
          id: 12,
          name: "متابعين تيك توك",
          price: 13,
          image: "متابعين تيك توك.png",
          category: "tiktok",
          description: "متابعين تيك توك بأسعار منافسة.",
          fullDescription: "متابعين تيك توك:\n• 1000 متابع - 13 ريال\n• 2000 متابع - 21 ريال\n• 3000 متابع - 29 ريال\n• 4000 متابع - 36 ريال\n• 5000 متابع - 40 ريال\n\nمدة التوصيل: 1-24 ساعة\nالضمان: 30 يوم",
          options: [
            { label: "1000 متابع", price: 13 },
            { label: "2000 متابع", price: 21 },
            { label: "3000 متابع", price: 29 },
            { label: "4000 متابع", price: 36 },
            { label: "5000 متابع", price: 40 }
          ]
        },
        {
          id: 13,
          name: "لايكات تيك توك",
          price: 3,
          image: "لايكات تيك توك.png",
          category: "tiktok",
          description: "لايكات تيك توك بكميات مختلفة.",
          fullDescription: "لايكات تيك توك:\n• 1000 لايك - 3 ريال\n• 2000 لايك - 5 ريال\n• 3000 لايك - 6 ريال\n• 4000 لايك - 7 ريال\n• 5000 لايك - 8 ريال\n• 10000 لايك - 14 ريال\n\nمدة التوصيل: 1-24 ساعة\nالضمان: 30 يوم",
          options: [
            { label: "1000 لايك", price: 3 },
            { label: "2000 لايك", price: 5 },
            { label: "3000 لايك", price: 6 },
            { label: "4000 لايك", price: 7 },
            { label: "5000 لايك", price: 8 },
            { label: "10000 لايك", price: 14 }
          ]
        },
        {
          id: 14,
          name: "مشاهدات تيك توك",
          price: 2,
          image: "مشاهدات تيك توك.png",
          category: "tiktok",
          description: "مشاهدات حقيقية لفيديوهات تيك توك.",
          fullDescription: "مشاهدات تيك توك:\n• 10 ألف مشاهدة - 2 ريال\n• 15 ألف مشاهدة - 3 ريال\n• 20 ألف مشاهدة - 4 ريال\n• 30 ألف مشاهدة - 5 ريال\n• 50 ألف مشاهدة - 6 ريال\n• 100 ألف مشاهدة - 7 ريال\n• 200 ألف مشاهدة - 8 ريال\n• 300 ألف مشاهدة - 9 ريال\n• 400 ألف مشاهدة - 10 ريال\n• 500 ألف مشاهدة - 11 ريال\n\nمدة التوصيل: 1-24 ساعة\nالضمان: 30 день",
          options: [
            { label: "10 ألف مشاهدة", price: 2 },
            { label: "15 ألف مشاهدة", price: 3 },
            { label: "20 ألف مشاهدة", price: 4 },
            { label: "30 ألف مشاهدة", price: 5 },
            { label: "50 ألف مشاهدة", price: 6 },
            { label: "100 ألف مشاهدة", price: 7 },
            { label: "200 ألف مشاهدة", price: 8 },
            { label: "300 ألف مشاهدة", price: 9 },
            { label: "400 ألف مشاهدة", price: 10 },
            { label: "500 ألف مشاهدة", price: 11 }
          ]
        }
      ],
      roblox: [
        {
          id: 16,
          name: "عملات روبلكس",
          price: 6,
          image: "roblox.png",
          category: "roblox",
          description: "عملات روبلكس بكميات مختلفة.",
          fullDescription: "عملات روبلكس:\n• 80 روبلكس ب 6 ريال\n• 500 روبلكس ب 26 ريال\n• 1000 روبلكس ب 47 ريال\n• 2000 روبلكس ب 86 ريال\n• 5250 روبلكس ب 210 ريال\n\nالتوصيل: من 5 دقائق إلى 24 ساعة",
          options: [
            { label: "80 روبلكس", price: 6 },
            { label: "500 روبلكس", price: 26 },
            { label: "1000 روبلكس", price: 47 },
            { label: "2000 روبلكس", price: 86 },
            { label: "5250 روبلكس", price: 210 }
          ]
        }
      ],
      instagram: [
        {
          id: 17,
          name: "متابعين انستغرام",
          price: 15,
          image: "instagram.png",
          category: "instagram",
          description: "متابعين حقيقيين لحساب انستغرام.",
          fullDescription: "متابعين انستغرام:\n• 1000 متابع - 15 ريال\n• 2000 متابع - 28 ريال\n• 3000 متابع - 40 ريال\n\nمدة التوصيل: 1-24 ساعة\nالضمان: 30 يوم",
          options: [
            { label: "1000 متابع", price: 15 },
            { label: "2000 متابع", price: 28 },
            { label: "3000 متابع", price: 40 }
          ]
        },
        {
          id: 18,
          name: "لايكات انستغرام",
          price: 5,
          image: "instagram.png",
          category: "instagram",
          description: "لايكات حقيقية لمنشورات انستغرام.",
          fullDescription: "لايكات انستغرام:\n• 1000 لايك - 5 ريال\n• 2000 لايك - 9 ريال\n• 3000 لايك - 13 ريال\n\nمدة التوصيل: 1-12 ساعة\nالضمان: 30 يوم",
          options: [
            { label: "1000 لايك", price: 5 },
            { label: "2000 لايك", price: 9 },
            { label: "3000 لايك", price: 13 }
          ]
        },
        {
          id: 19,
          name: "مشاهدات انستغرام",
          price: 4,
          image: "instagram.png",
          category: "instagram",
          description: "مشاهدات حقيقية لستوريات انستغرام.",
          fullDescription: "مشاهدات انستغرام:\n• 5 آلاف مشاهدة - 4 ريال\n• 10 آلاف مشاهدة - 7 ريال\n• 20 ألف مشاهدة - 12 ريال\n\nمدة التوصيل: 1-12 ساعة\nالضمان: 30 يوم",
          options: [
            { label: "5 آلاف مشاهدة", price: 4 },
            { label: "10 آلاف مشاهدة", price: 7 },
            { label: "20 ألف مشاهدة", price: 12 }
          ]
        }
      ],
      whatsapp: [
        {
          id: 20,
          name: "رقم لتفعيل واتساب",
          price: 7,
          image: "لوقو رقم واتساب.png",
          category: "whatsapp",
          description: "رقم واتساب جديد لتفعيل الحسابات.",
          fullDescription: "رقم واتساب:\n• رقم جديد كلياً\n• مناسب للتسجيل\n• تأكيد فوري\n• دعم فني متواصل\n\nمدة التوصيل: من 5 دقائق إلى 24 ساعة\nالضمان: استرجاع خلال 24 ساعة"
        }
      ]
    };
    
    // إضافة اليوزرات إلى منتجات تيك توك
    tiktokUsernames.forEach(user => {
      products.tiktok.push(user);
    });
    
    /* ====== تهيئة التطبيق ====== */
    document.addEventListener('DOMContentLoaded', function() {
      initApp();
    });
    
    function initApp() {
      // تحميل حالة الكوكيز
      loadCookies();
      
      // تهيئة بيانات المخزون
      initializeUsernamesStock();
      
      // تحميل المنتجات
      loadProducts();
      
      // عرض الصورة الافتتاحية
      setTimeout(() => {
        document.getElementById('welcome-modal').style.display = 'flex';
      }, 500);
      
      // تهيئة السلة
      renderCart();
      
      // تهيئة المساعد الذكي
      window.smartAssistant = new SmartAssistant();
      
      // بدء عد تنازلي للخدمات القادمة
      startServicesCountdown();
      
      // تهيئة خلفية الجسيمات
      initParticles();
      
      // إضافة زر لإعادة تعيين المخزون (للتجربة فقط)
      addResetButton();
    }
    
    /* ====== زر إعادة تعيين المخزون ====== */
    function addResetButton() {
      setTimeout(() => {
        if (!document.getElementById('resetStockBtn')) {
          const resetBtn = document.createElement('button');
          resetBtn.id = 'resetStockBtn';
          resetBtn.innerHTML = '<i class="fas fa-sync-alt"></i> إعادة تعيين المخزون';
          resetBtn.style = `
            position: fixed;
            bottom: 100px;
            right: 22px;
            background: #ff9800;
            color: white;
            padding: 10px 15px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            z-index: 2000;
            font-family: inherit;
            display: none;
          `;
          resetBtn.onclick = resetUsernameStock;
          document.body.appendChild(resetBtn);
          
          // إظهار الزر فقط في وضع التطوير
          if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
            resetBtn.style.display = 'block';
          }
        }
      }, 2000);
    }
    
    /* ====== نافذة الصور المنبثقة ====== */
    function openImageModal(imageSrc) {
      document.getElementById('modalImage').src = imageSrc;
      document.getElementById('imageModal').classList.add('active');
    }
    
    function closeImageModal() {
      document.getElementById('imageModal').classList.remove('active');
    }
    
    // إغلاق نافذة الصور عند النقر خارجها
    document.getElementById('imageModal').addEventListener('click', function(e) {
      if (e.target === this) {
        closeImageModal();
      }
    });
    
    /* ====== نافذة الترحيب ====== */
    function closeWelcomeModal() {
      document.getElementById('welcome-modal').style.display = 'none';
    }
    
    /* ====== إدارة المشتركين ====== */
    function loginAdmin() {
      const password = document.getElementById('admin-password').value;
      if (password === ADMIN_PASSWORD) {
        document.getElementById('admin-panel').style.display = 'block';
        loadSubscribersList();
        showNotification('تم تسجيل الدخول بنجاح', 'success');
      } else {
        showNotification('كلمة المرور غير صحيحة', 'error');
      }
    }
    
    function loadSubscribersList() {
      const subscribersList = document.getElementById('subscribers-list');
      subscribersList.innerHTML = '';
      
      if (subscribers.length === 0) {
        subscribersList.innerHTML = '<tr><td colspan="3" style="text-align: center; padding: 20px;">لا يوجد مشتركون بعد</td></tr>';
        return;
      }
      
      subscribers.forEach(subscriber => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${subscriber.email || '---'}</td>
          <td>${subscriber.phone || '---'}</td>
          <td>${new Date(subscriber.date).toLocaleDateString('ar-SA')}</td>
        `;
        subscribersList.appendChild(row);
      });
    }
    
    function exportSubscribers() {
      const dataStr = JSON.stringify(subscribers, null, 2);
      const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
      const exportFileDefaultName = 'zido-subscribers.json';
      
      const linkElement = document.createElement('a');
      linkElement.setAttribute('href', dataUri);
      linkElement.setAttribute('download', exportFileDefaultName);
      linkElement.click();
      
      showNotification('تم تصدير بيانات المشتركين', 'success');
    }
    
    function clearAllSubscribers() {
      if (confirm('هل أنت متأكد من مسح جميع بيانات المشتركين؟')) {
        subscribers = [];
        localStorage.setItem('zidoSubscribers', JSON.stringify(subscribers));
        loadSubscribersList();
        showNotification('تم مسح جميع المشتركين', 'success');
      }
    }
    
    /* ====== نظام الكوكيز ====== */
    function loadCookies() {
      const accepted = localStorage.getItem('cookiesAccepted');
      if (accepted) {
        const lastSection = localStorage.getItem('lastSection') || 'home';
        showSection(lastSection);
      }
    }
    
    function acceptCookies() {
      localStorage.setItem('cookiesAccepted', 'true');
      document.getElementById('cookieConsent').classList.remove('show');
      showNotification('شكراً لقبولك سياسة الكوكيز!', 'success');
    }
    
    function closeCookies() {
      document.getElementById('cookieConsent').classList.remove('show');
    }
    
    /* ====== المساعد الذكي ====== */
    class SmartAssistant {
      constructor() {
        this.chatHistory = [];
      }
      
      processQuery(query) {
        const responses = {
          'سعر': 'يمكنك رؤية جميع الأسعار في صفحة المنتج. هل تريد مساعدة في اختيار الباقة المناسبة؟',
          'توصيل': 'التوصيل فوري لمعظم الخدمات! بعضها قد يستغرق حتى 24 ساعة كحد أقصى.',
          'دفع': 'نقبل STC Pay، فيزا/ماستركارد، Apple Pay، PayPal، والعديد من خيارات الدفع الأخرى.',
          'خصم': 'يمكنك استخدام كود "ZIDO10" لخصم 10% على طلبك!',
          'فورتنايت': 'لدينا جميع خدمات فورتنايت: فيبوكس، الطاقم الشهري، وحسابات خاصة!',
          'تيك توك': 'نقدم متابعين، لايكات، مشاهدات، ويوزرات تيك توك بأسعار منافسة!',
          'يوزر': 'لدينا يوزرات تيك توك حصرية مع مخزون محدود!',
          'مرحبا': 'مرحباً بك! كيف يمكنني مساعدتك اليوم؟',
          'شكرا': 'العفو! دائماً سعيد لمساعدتك. هل تحتاج أي شيء آخر؟'
        };
        
        query = query.toLowerCase();
        for (const [keyword, response] of Object.entries(responses)) {
          if (query.includes(keyword.toLowerCase())) {
            return response;
          }
        }
        
        return 'شكرًا لاستفسارك! يمكنني مساعدتك في معلومات عن المنتجات، الأسعار، طرق الدفع، والتوصيل.';
      }
    }
    
    /* ====== دوال Tawk.to ====== */
    function openTawkTo() {
      if (typeof Tawk_API !== 'undefined') {
        Tawk_API.maximize();
        showNotification('مرحباً بك في الدردشة المباشرة!', 'success');
      } else {
        showNotification('جاري تحميل الشات...', 'info');
        setTimeout(() => {
          if (typeof Tawk_API !== 'undefined') {
            Tawk_API.maximize();
          } else {
            showNotification('تعذر فتح الشات، يرجى المحاولة لاحقاً', 'error');
          }
        }, 2000);
      }
    }
    
    /* ====== عد تنازلي للخدمات القادمة ====== */
    function startServicesCountdown() {
      const launchDate = new Date();
      launchDate.setDate(launchDate.getDate() + 14);
      
      function updateCountdown() {
        const now = new Date();
        const diff = launchDate - now;
        
        if (diff <= 0) {
          document.getElementById('days').textContent = '00';
          document.getElementById('hours').textContent = '00';
          document.getElementById('minutes').textContent = '00';
          document.getElementById('seconds').textContent = '00';
          return;
        }
        
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        document.getElementById('days').textContent = days.toString().padStart(2, '0');
        document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
        document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
        document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
      }
      
      updateCountdown();
      setInterval(updateCountdown, 1000);
    }
    
    /* ====== تحميل المنتجات ====== */
    function loadProducts() {
      loadFeaturedProducts();
      loadCategoryProducts('fortnite');
      loadCategoryProducts('tiktok');
      loadCategoryProducts('roblox');
      loadCategoryProducts('instagram');
      loadCategoryProducts('whatsapp');
    }
    
    function loadFeaturedProducts() {
      const container = document.getElementById('featured-products');
      container.innerHTML = products.featured.map(product => {
        const isTiktokUsername = product.category === 'tiktok' && product.options && product.id >= 1000;
        
        if (isTiktokUsername) {
          // عرض اليوزرات مع الخيارات
          return `
            <div class="item featured-item" onclick="showProductDetail(${product.id})">
              <button class="wishlist-btn" onclick="event.stopPropagation(); toggleWishlist(this, '${product.name}', ${product.price}, '${product.image}')">
                <i class="far fa-heart"></i>
              </button>
              <span class="featured-badge">🔥 الأكثر مبيعًا</span>
              <img src="${product.image}" alt="${product.name}" loading="lazy" onclick="event.stopPropagation(); openImageModal('${product.image}')">
              <h3>${product.name}</h3>
              <p class="price">من ${product.price} ريال</p>
              <div class="product-description">
                ${product.description}
              </div>
              <button class="read-more" onclick="event.stopPropagation(); toggleProductDescription(this.parentElement)">قراءة المزيد</button>
              <button class="btn" onclick="event.stopPropagation(); showProductDetail(${product.id})">
                <i class="fas fa-eye"></i> عرض الخيارات
              </button>
            </div>
          `;
        } else {
          // منتجات عادية
          return `
            <div class="item featured-item" onclick="showProductDetail(${product.id})">
              <button class="wishlist-btn" onclick="event.stopPropagation(); toggleWishlist(this, '${product.name}', ${product.price}, '${product.image}')">
                <i class="far fa-heart"></i>
              </button>
              <span class="featured-badge">🔥 الأكثر مبيعًا</span>
              <img src="${product.image}" alt="${product.name}" loading="lazy" onclick="event.stopPropagation(); openImageModal('${product.image}')">
              <h3>${product.name}</h3>
              <p class="price">${product.price} ريال</p>
              <div class="product-description">
                ${product.description}
              </div>
              <button class="read-more" onclick="event.stopPropagation(); toggleProductDescription(this.parentElement)">قراءة المزيد</button>
              <button class="btn" onclick="event.stopPropagation(); addToCart('${product.name}', ${product.price}, '${product.image}', ${product.id})">
                <i class="fas fa-cart-plus"></i> إضافة للسلة
              </button>
            </div>
          `;
        }
      }).join('');
    }
    
    function loadCategoryProducts(category) {
      const container = document.getElementById(`${category}-products`);
      if (container && products[category]) {
        container.innerHTML = products[category].map(product => {
          const isTiktokUsername = product.category === 'tiktok' && product.options && product.id >= 1000;
          
          if (isTiktokUsername) {
            // عرض اليوزرات مع الخيارات
            const availableOptions = product.options.filter(option => 
              isUsernameAvailable(option.serial)
            );
            
            if (availableOptions.length === 0) {
              // كل الخيارات نفذت
              return `
                <div class="item out-of-stock">
                  <span class="out-of-stock-badge">🛒 نفذ من المخزون</span>
                  <button class="wishlist-btn" onclick="event.stopPropagation(); toggleWishlist(this, '${product.name}', ${product.price}, '${product.image}')">
                    <i class="far fa-heart"></i>
                  </button>
                  <img src="${product.image}" alt="${product.name}" loading="lazy" onclick="event.stopPropagation(); openImageModal('${product.image}')">
                  <h3>${product.name}</h3>
                  <p class="price">من ${product.price} ريال</p>
                  <div class="product-description">
                    ${product.description}
                  </div>
                  <button class="btn" disabled>
                    <i class="fas fa-times"></i> نفذ من المخزون
                  </button>
                </div>
              `;
            }
            
            // هناك خيارات متاحة
            return `
              <div class="item" onclick="showProductDetail(${product.id})">
                <button class="wishlist-btn" onclick="event.stopPropagation(); toggleWishlist(this, '${product.name}', ${product.price}, '${product.image}')">
                  <i class="far fa-heart"></i>
                </button>
                <img src="${product.image}" alt="${product.name}" loading="lazy" onclick="event.stopPropagation(); openImageModal('${product.image}')">
                <h3>${product.name}</h3>
                <p class="price">من ${product.price} ريال</p>
                <div class="product-description">
                  ${product.description}
                </div>
                <button class="read-more" onclick="event.stopPropagation(); toggleProductDescription(this.parentElement)">قراءة المزيد</button>
                <button class="btn" onclick="event.stopPropagation(); showProductDetail(${product.id})">
                  <i class="fas fa-eye"></i> عرض الخيارات (${availableOptions.length} متاح)
                </button>
              </div>
            `;
          } else if (product.options) {
            // منتج له خيارات عادية
            return `
              <div class="item" onclick="showProductDetail(${product.id})">
                <button class="wishlist-btn" onclick="event.stopPropagation(); toggleWishlist(this, '${product.name}', ${product.price}, '${product.image}')">
                  <i class="far fa-heart"></i>
                </button>
                <img src="${product.image}" alt="${product.name}" loading="lazy" onclick="event.stopPropagation(); openImageModal('${product.image}')">
                <h3>${product.name}</h3>
                <select id="option-${product.id}" class="product-option" onclick="event.stopPropagation()">
                  <option value="">اختر الباقة</option>
                  ${product.options.map(option => 
                    `<option value="${option.label}-${option.price}">${option.label} - ${option.price} ريال</option>`
                  ).join('')}
                </select>
                <button class="btn" onclick="event.stopPropagation(); addCustomProduct('${product.id}', '${product.name}', '${product.image}')">
                  <i class="fas fa-cart-plus"></i> إضافة للسلة
                </button>
              </div>
            `;
          } else {
            // منتج عادي بدون خيارات
            return `
              <div class="item" onclick="showProductDetail(${product.id})">
                <button class="wishlist-btn" onclick="event.stopPropagation(); toggleWishlist(this, '${product.name}', ${product.price}, '${product.image}')">
                  <i class="far fa-heart"></i>
                </button>
                <img src="${product.image}" alt="${product.name}" loading="lazy" onclick="event.stopPropagation(); openImageModal('${product.image}')">
                <h3>${product.name}</h3>
                <p class="price">${product.price} ريال</p>
                <div class="product-description">
                  ${product.description}
                </div>
                <button class="read-more" onclick="event.stopPropagation(); toggleProductDescription(this.parentElement)">قراءة المزيد</button>
                <button class="btn" onclick="event.stopPropagation(); addToCart('${product.name}', ${product.price}, '${product.image}', ${product.id})">
                  <i class="fas fa-cart-plus"></i> إضافة للسلة
                </button>
              </div>
            `;
          }
        }).join('');
      }
    }
    
    /* ====== دوال المنتج المفصل ====== */
    function getAllProducts() {
      return Object.values(products).flat();
    }
    
    function showProductDetail(productId) {
      const product = getAllProducts().find(p => p.id === productId);
      if (!product) return;
      
      const isTiktokUsername = product.category === 'tiktok' && product.options && product.id >= 1000;
      
      let optionsHTML = '';
      if (isTiktokUsername) {
        // عرض خيارات اليوزرات
        optionsHTML = `
          <div class="product-options">
            <h3>🛍️ اختر يوزر من القائمة</h3>
            <div style="display: flex; flex-direction: column; gap: 10px;">
              ${product.options.map(option => {
                const isAvailable = isUsernameAvailable(option.serial);
                
                return `
                  <div style="
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    padding: 12px;
                    background: ${isAvailable ? 'rgba(0, 0, 0, 0.2)' : 'rgba(255, 107, 107, 0.1)'};
                    border-radius: 8px;
                    border: 1px solid ${isAvailable ? 'var(--glass-border)' : 'var(--danger)'};
                  ">
                    <div>
                      <strong>${option.label}</strong>
                      <div style="font-size: 12px; color: var(--muted);">${option.price} ريال</div>
                      <div style="font-size: 11px; color: ${isAvailable ? 'var(--brand)' : 'var(--danger)'};">
                        ${isAvailable ? 'متاح' : 'نفذ من المخزون'}
                      </div>
                    </div>
                    <button 
                      class="btn" 
                      style="width: auto; padding: 8px 16px;"
                      onclick="addUsernameToCart('${option.label}', ${option.price}, '${product.image}', '${option.serial}', ${product.id})"
                      ${!isAvailable ? 'disabled' : ''}
                    >
                      ${isAvailable ? 'إضافة' : 'نفذ'}
                    </button>
                  </div>
                `;
              }).join('')}
            </div>
          </div>
        `;
      } else if (product.options) {
        // منتجات عادية بخيارات
        optionsHTML = `
          <div class="product-options">
            <h3>🛍️ خيارات الشراء</h3>
            <select id="detail-option-${product.id}">
              <option value="">اختر الباقة</option>
              ${product.options.map(option => 
                `<option value="${option.label}-${option.price}">${option.label} - ${option.price} ريال</option>`
              ).join('')}
            </select>
          </div>
        `;
      }
      
      const container = document.getElementById('product-detail');
      
      container.innerHTML = `
        <button class="back-btn" onclick="goBackToCategory('${product.category}')">
          <i class="fas fa-arrow-right"></i> العودة
        </button>
        
        <div class="product-header">
          <div class="product-image">
            <img src="${product.image}" alt="${product.name}" onclick="openImageModal('${product.image}')">
          </div>
          
          <div class="product-info">
            <h1>${product.name}</h1>
            <p class="price" style="font-size: 24px; margin: 15px 0;">
              ${isTiktokUsername ? `من ${product.price} ريال` : `${product.price} ريال`}
            </p>
            
            <div class="about-section">
              <h3>📋 وصف المنتج</h3>
              <p class="product-description-full">${product.fullDescription}</p>
            </div>
            
            ${optionsHTML}
            
            <div class="product-actions">
              ${!isTiktokUsername && product.options ? `
                <button class="btn" onclick="addCustomProductFromDetail('${product.id}', '${product.name}', '${product.image}')">
                  <i class="fas fa-cart-plus"></i> إضافة إلى السلة
                </button>
              ` : !isTiktokUsername ? `
                <button class="btn" onclick="addToCart('${product.name}', ${product.price}, '${product.image}', ${product.id})">
                  <i class="fas fa-cart-plus"></i> إضافة إلى السلة
                </button>
              ` : ''}
              
              ${!isTiktokUsername ? `
                <button class="btn" style="background: var(--accent);" onclick="addToCartAndCheckout('${product.name}', ${product.price}, '${product.image}', ${product.id})">
                  <i class="fas fa-bolt"></i> شراء سريع
                </button>
              ` : ''}
              
              <button class="btn" style="background: var(--glass);" onclick="toggleWishlistDetail('${product.name}', ${product.price}, '${product.image}')">
                <i class="far fa-heart"></i> المفضلة
              </button>
            </div>
          </div>
        </div>
      `;
      
      localStorage.setItem('lastSection', 'product-detail');
      localStorage.setItem('lastCategory', product.category);
      showSection('product-detail');
    }
    
    function goBackToCategory(category) {
      showSection(category);
    }
    
    /* ====== إضافة يوزر تيك توك للسلة ====== */
    function addUsernameToCart(label, price, image, serial, productId) {
      if (!isUsernameAvailable(serial)) {
        showNotification("هذا اليوزر نفذ من المخزون!", 'error');
        return;
      }
      
      // وضع علامة على اليوزر كمباع
      const markedAsSold = markUsernameAsSold(serial);
      if (!markedAsSold) {
        showNotification("عذراً، هذا اليوزر غير متاح!", 'error');
        return;
      }
      
      // إضافة إلى السلة
      addToCart(label, price, image, productId, false, 1, serial);
      
      // تحديث عرض المنتج
      setTimeout(() => {
        loadCategoryProducts('tiktok');
        const detailSection = document.getElementById('product-detail');
        if (detailSection.classList.contains('active')) {
          showProductDetail(productId);
        }
      }, 500);
    }
    
    /* ====== إضافة منتج مخصص ====== */
    function addCustomProduct(productId, productName, productImage) {
      const selectElement = document.getElementById(`option-${productId}`);
      const selectedValue = selectElement.value;
      
      if (!selectedValue) {
        showNotification("يرجى اختيار الباقة أولاً", 'error');
        return;
      }
      
      const [label, price] = selectedValue.split('-');
      const finalProductName = `${productName} (${label})`;
      
      addToCart(finalProductName, parseFloat(price), productImage, productId);
      selectElement.value = "";
    }
    
    function addCustomProductFromDetail(productId, productName, productImage) {
      const selectElement = document.getElementById(`detail-option-${productId}`);
      const selectedValue = selectElement.value;
      
      if (!selectedValue) {
        showNotification("يرجى اختيار الباقة أولاً", 'error');
        return;
      }
      
      const [label, price] = selectedValue.split('-');
      const finalProductName = `${productName} (${label})`;
      
      addToCart(finalProductName, parseFloat(price), productImage, productId);
      showNotification(`تمت إضافة ${finalProductName} إلى السلة`, 'success');
    }
    
    /* ====== دوال السلة ====== */
    function addToCart(name, price, img, productId = null, isSpecialOffer = false, quantity = 1, serial = null) {
      showLoader();
      
      const existingItemIndex = cart.findIndex(item => 
        item.name === name && item.price === price && item.serial === serial
      );
      
      if (existingItemIndex > -1) {
        cart[existingItemIndex].quantity += quantity;
      } else {
        cart.push({ 
          name, 
          price, 
          img: img || '', 
          quantity, 
          isSpecialOffer, 
          productId,
          serial 
        });
      }
      
      saveCart();
      renderCart();
      showNotification(`تمت إضافة "${name}" إلى السلة`, 'success');
      
      const cartIcon = document.getElementById('cartIcon');
      cartIcon.classList.add('shake');
      setTimeout(() => {
        cartIcon.classList.remove('shake');
        hideLoader();
      }, 500);
    }
    
    function addToCartAndCheckout(name, price, img, productId) {
      addToCart(name, price, img, productId);
      toggleCart();
    }
    
    function updateQuantity(index, change) {
      cart[index].quantity += change;
      if (cart[index].quantity <= 0) {
        cart.splice(index, 1);
      }
      saveCart();
      renderCart();
    }
    
    function removeItem(index) {
      const itemName = cart[index].name;
      cart.splice(index, 1);
      saveCart();
      renderCart();
      showNotification(`تمت إزالة "${itemName}" من السلة`, 'error');
    }
    
    function saveCart() {
      localStorage.setItem('zidoCart', JSON.stringify(cart));
    }
    
    function renderCart() {
      const list = document.getElementById('cart-list');
      const totalEl = document.getElementById('total');
      const countEl = document.getElementById('cart-count');
      list.innerHTML = '';
      let sum = 0;
      
      if (cart.length === 0) {
        list.innerHTML = '<div class="empty-cart"><i class="fas fa-shopping-basket"></i><p>سلة التسوق فارغة</p></div>';
        totalEl.textContent = '0';
        countEl.textContent = '0';
        return;
      }
      
      cart.forEach((it, i) => {
        const itemTotal = it.price * it.quantity;
        sum += itemTotal;
        const row = document.createElement('div');
        row.className = 'cart-item fade-in';
        row.innerHTML = `
          ${it.img ? `<img src="${it.img}" alt="${it.name}" loading="lazy">` : ''}
          <div class="meta">
            <div class="name">${it.name}</div>
            <div class="price">${itemTotal.toFixed(2).replace(/\.00$/, '')} ريال (${it.price} × ${it.quantity})</div>
            <div class="quantity-controls">
              <button onclick="updateQuantity(${i}, -1)">-</button>
              <span>${it.quantity}</span>
              <button onclick="updateQuantity(${i}, 1)">+</button>
            </div>
          </div>
          <button class="remove-btn" title="حذف" onclick="removeItem(${i})"><i class="fas fa-trash"></i></button>
        `;
        list.appendChild(row);
      });
      
      totalEl.textContent = sum.toFixed(2).replace(/\.00$/, '');
      countEl.textContent = cart.reduce((total, item) => total + item.quantity, 0);
      originalTotalBeforeDiscount = sum;
    }
    
    function toggleCart() {
      const ov = document.getElementById('cartOverlay');
      if (ov.classList.contains('active')) {
        ov.classList.remove('active');
        setTimeout(() => { ov.style.display = 'none'; }, 300);
      } else {
        ov.style.display = 'flex';
        setTimeout(() => { ov.classList.add('active'); }, 10);
        discountApplied = false;
      }
    }
    
    function applyDiscount() {
      const hasSpecialOffer = cart.some(item => item.isSpecialOffer);
      if (hasSpecialOffer) {
        showNotification('لا يمكن تطبيق كود الخصم على المنتجات الخاصة بالعروض.', 'error');
        return;
      }
      
      const code = document.getElementById('discount-code').value.trim();
      if (validDiscountCodes[code]) {
        const discount = validDiscountCodes[code];
        const totalElement = document.getElementById('total');
        let currentTotal = parseFloat(totalElement.textContent);
        const discountedTotal = currentTotal * (1 - discount);
        totalElement.textContent = discountedTotal.toFixed(2).replace(/\.00$/, '');
        showNotification(`تم تطبيق خصم ${discount * 100}% بنجاح!`, 'success');
        discountApplied = true;
        localStorage.setItem('originalTotalBeforeDiscount', originalTotalBeforeDiscount);
        localStorage.setItem('discountedTotal', discountedTotal);
      } else {
        showNotification('الكود غير صالح، حاول مرة أخرى.', 'error');
      }
    }
    
    function checkout(method) {
      if (cart.length === 0) {
        showNotification('سلتك فارغة', 'error');
        return;
      }
      
      const items = cart.map(it => `• ${it.name} — ${it.price} ريال × ${it.quantity} = ${(it.price * it.quantity).toFixed(2)} ريال`).join('%0A');
      const finalTotal = document.getElementById('total').textContent;
      const discountCode = document.getElementById('discount-code').value.trim();
      let note = '';
      
      if (method.includes('فيزا')) {
        note = '%0A%0A⚠️ يوجد رسوم إضافية للفيزا.';
      }
      
      const originalTotal = localStorage.getItem('originalTotalBeforeDiscount');
      if (originalTotal && discountCode && validDiscountCodes[discountCode]) {
        note += `%0A%0A🎉 تم تطبيق خصم ${validDiscountCodes[discountCode] * 100}% بكود "${discountCode}"`;
        note += `%0Aالسعر قبل الخصم: ${originalTotal} ريال`;
        note += `%0Aالسعر بعد الخصم: ${finalTotal} ريال`;
      }
      
      const orderNumber = 'ZD-' + Math.floor(10000 + Math.random() * 90000);
      document.getElementById('order-number').textContent = orderNumber;
      const msg = `طلب جديد ${method}:%0A%0A${items}%0A%0Aالمجموع النهائي: ${finalTotal} ريال%0Aرقم الطلب: ${orderNumber}${note}`;
      const link = `https://wa.me/966537029503?text=${msg}`;
      
      cart = [];
      saveCart();
      renderCart();
      document.getElementById('confirmation').style.display = 'flex';
      window.open(link, '_blank');
      
      discountApplied = false;
      localStorage.removeItem('originalTotalBeforeDiscount');
      localStorage.removeItem('discountedTotal');
    }
    
    function closeConfirmation() {
      document.getElementById('confirmation').style.display = 'none';
      toggleCart();
    }
    
    /* ====== دوال المساعد الذكي ====== */
    function toggleAssistant() {
      const chat = document.getElementById('assistantChat');
      chat.style.display = chat.style.display === 'flex' ? 'none' : 'flex';
    }
    
    function sendMessage() {
      const input = document.getElementById('assistantInput');
      const query = input.value.trim();
      
      if (query) {
        addMessage(query, 'user');
        input.value = '';
        
        setTimeout(() => {
          const response = smartAssistant.processQuery(query);
          addMessage(response, 'assistant');
        }, 1000);
      }
    }
    
    document.getElementById('assistantInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        sendMessage();
      }
    });
    
    function addMessage(text, sender) {
      const messages = document.getElementById('assistantMessages');
      const message = document.createElement('div');
      message.className = `message ${sender}`;
      message.textContent = text;
      messages.appendChild(message);
      messages.scrollTop = messages.scrollHeight;
    }
    
    /* ====== دوال إضافية ====== */
    function toggleWishlist(button, name, price, img) {
      const index = wishlist.findIndex(item => item.name === name);
      if (index > -1) {
        wishlist.splice(index, 1);
        button.innerHTML = '<i class="far fa-heart"></i>';
        showNotification(`تمت إزالة "${name}" من المفضلة`, 'error');
      } else {
        wishlist.push({ name, price, img });
        button.innerHTML = '<i class="fas fa-heart"></i>';
        showNotification(`تمت إضافة "${name}" إلى المفضلة`, 'success');
      }
      localStorage.setItem('zidoWishlist', JSON.stringify(wishlist));
    }
    
    function toggleWishlistDetail(name, price, img) {
      const index = wishlist.findIndex(item => item.name === name);
      if (index > -1) {
        wishlist.splice(index, 1);
        showNotification(`تمت إزالة "${name}" من المفضلة`, 'error');
      } else {
        wishlist.push({ name, price, img });
        showNotification(`تمت إضافة "${name}" إلى المفضلة`, 'success');
      }
      localStorage.setItem('zidoWishlist', JSON.stringify(wishlist));
    }
    
    function toggleProductDescription(element) {
      element.classList.toggle('expanded');
      const button = element.querySelector('.read-more');
      button.textContent = element.classList.contains('expanded') ? 'قراءة أقل' : 'قراءة المزيد';
    }
    
    function subscribeToOffers() {
      const email = document.getElementById('subscribe-email').value.trim();
      const phone = document.getElementById('subscribe-phone').value.trim();
      
      if (!email && !phone) {
        showNotification('يرجى إدخال بريدك الإلكتروني أو رقم هاتفك.', 'error');
        return;
      }
      
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (email && !emailRegex.test(email)) {
        showNotification('يرجى إدخال بريد إلكتروني صحيح.', 'error');
        return;
      }
      
      const existingSubscriber = subscribers.find(sub => sub.email === email || sub.phone === phone);
      if (existingSubscriber) {
        showNotification('أنت مشترك بالفعل في قائمة العروض!', 'error');
        return;
      }
      
      subscribers.push({ email, phone, date: new Date().toISOString() });
      localStorage.setItem('zidoSubscribers', JSON.stringify(subscribers));
      showNotification('شكرًا للاشتراك! ستصلك العروض الخاصة قريبًا.', 'success');
      document.getElementById('subscribe-email').value = '';
      document.getElementById('subscribe-phone').value = '';
    }
    
    function subscribeForUpdates() {
      const email = document.getElementById('notify-email').value.trim();
      if (!email) {
        showNotification('يرجى إدخال بريدك الإلكتروني', 'error');
        return;
      }
      
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        showNotification('يرجى إدخال بريد إلكتروني صحيح', 'error');
        return;
      }
      
      let updateSubscribers = JSON.parse(localStorage.getItem('zidoUpdateSubscribers')) || [];
      if (!updateSubscribers.includes(email)) {
        updateSubscribers.push(email);
        localStorage.setItem('zidoUpdateSubscribers', JSON.stringify(updateSubscribers));
      }
      
      showNotification('شكراً لاشتراكك! سنخطرك عند إطلاق الخدمات الجديدة.', 'success');
      document.getElementById('notify-email').value = '';
    }
    
    /* ====== دوال إضافية للفوتر ====== */
    function showPrivacyPolicy() {
      showNotification('سياسة الخصوصية: نحن نحترم خصوصيتك ولا نشارك بياناتك مع أي طرف ثالث.', 'info');
    }
    
    function showTerms() {
      showNotification('الشروط والأحكام: يرجى قراءة الشروط والأحكام قبل استخدام الخدمة.', 'info');
    }
    
    function showReturnPolicy() {
      showNotification('سياسة الإرجاع: يمكنك طلب استرجاع المبلغ خلال 24 ساعة إذا لم يتم التوصيل.', 'info');
    }
    
    function applyCoupon(code) {
      showNotification(`تم تطبيق كوبون ${code} بنجاح!`, 'success');
    }
    
    /* ====== دوال التنقل ====== */
    function showSection(id) {
      localStorage.setItem('lastSection', id);
      
      showLoader();
      document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.getElementById('sideMenu').classList.remove('open');
      window.scrollTo({ top: 0, behavior: 'smooth' });
      setTimeout(hideLoader, 300);
    }
    
    function toggleMenu() {
      const menu = document.getElementById('sideMenu');
      menu.classList.toggle('open');
    }
    
    function toggleSearch() {
      const searchContainer = document.getElementById('searchContainer');
      searchContainer.style.display = searchContainer.style.display === 'block' ? 'none' : 'block';
      if (searchContainer.style.display === 'block') {
        document.getElementById('searchInput').focus();
      }
      document.getElementById('sideMenu').classList.remove('open');
    }
    
    /* ====== دوال المساعدة ====== */
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      const notificationText = document.getElementById('notification-text');
      notificationText.textContent = message;
      notification.className = `notification ${type}`;
      notification.classList.add('show');
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }
    
    function showLoader() {
      document.getElementById('loader').style.display = 'flex';
    }
    
    function hideLoader() {
      document.getElementById('loader').style.display = 'none';
    }
    
    /* ====== خلفية الجسيمات المتحركة ====== */
    function initParticles() {
      const canvas = document.querySelector('canvas.bg');
      const ctx = canvas.getContext('2d');
      let W, H, particles = [];
      
      function resize() {
        W = canvas.width = window.innerWidth;
        H = canvas.height = window.innerHeight;
      }
      
      window.addEventListener('resize', resize);
      resize();
      
      for (let i = 0; i < 100; i++) {
        particles.push({
          x: Math.random() * W,
          y: Math.random() * H,
          r: Math.random() * 3 + 1,
          dx: (Math.random() - 0.5) * 0.5,
          dy: (Math.random() - 0.5) * 0.5,
          originalX: Math.random() * W,
          originalY: Math.random() * H
        });
      }
      
      let mouseX = W / 2, mouseY = H / 2;
      canvas.addEventListener('mousemove', (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
      });
      
      function draw() {
        ctx.clearRect(0, 0, W, H);
        particles.forEach(p => {
          const dx = mouseX - p.x;
          const dy = mouseY - p.y;
          const distance = Math.sqrt(dx * dx + dy * dy);
          if (distance < 150) {
            const force = (150 - distance) / 150;
            p.x += dx * force * 0.02;
            p.y += dy * force * 0.02;
          } else {
            p.x += (p.originalX - p.x) * 0.01;
            p.y += (p.originalY - p.y) * 0.01;
          }
          ctx.fillStyle = 'rgba(0, 207, 255, 0.7)';
          ctx.shadowBlur = 10;
          ctx.shadowColor = 'rgba(0, 207, 255, 0.5)';
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
          ctx.fill();
        });
        requestAnimationFrame(draw);
      }
      requestAnimationFrame(draw);
    }
  </script>
</body>
</html>
